import{c as an,r as b,h as xs,R as k,j as z,u as ws,i as vs,f as bs}from"./index-Cdzgjknd.js";import{C as Ss}from"./circle-C3CKzYcR.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=an("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=an("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=an("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=an("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);function se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=se(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ro={exports:{}},oo={},io={exports:{}},so={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=b;function Cs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ms=typeof Object.is=="function"?Object.is:Cs,$s=ft.useState,Ts=ft.useEffect,As=ft.useLayoutEffect,zs=ft.useDebugValue;function Is(e,t){var n=t(),r=$s({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return As(function(){o.value=n,o.getSnapshot=t,vn(o)&&i({inst:o})},[e,n,t]),Ts(function(){return vn(o)&&i({inst:o}),e(function(){vn(o)&&i({inst:o})})},[e]),zs(n),n}function vn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ms(e,n)}catch{return!0}}function Rs(e,t){return t()}var Ds=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rs:Is;so.useSyncExternalStore=ft.useSyncExternalStore!==void 0?ft.useSyncExternalStore:Ds;io.exports=so;var Hs=io.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cn=b,Ps=Hs;function Ls(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Os=typeof Object.is=="function"?Object.is:Ls,Vs=Ps.useSyncExternalStore,Fs=cn.useRef,Ws=cn.useEffect,Bs=cn.useMemo,Ys=cn.useDebugValue;oo.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=Fs(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Bs(function(){function c(h){if(!u){if(u=!0,l=h,h=r(h),o!==void 0&&s.hasValue){var y=s.value;if(o(y,h))return f=y}return f=h}if(y=f,Os(l,h))return y;var g=r(h);return o!==void 0&&o(y,g)?(l=h,y):(l=h,f=g)}var u=!1,l,f,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,o]);var a=Vs(e,i[0],i[1]);return Ws(function(){s.hasValue=!0,s.value=a},[a]),Ys(a),a};ro.exports=oo;var Xs=ro.exports;const js=xs(Xs),Us={},pr=e=>{let t;const n=new Set,r=(l,f)=>{const p=typeof l=="function"?l(t):l;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,h))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Us?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},Gs=e=>e?pr(e):pr,{useDebugValue:Zs}=k,{useSyncExternalStoreWithSelector:qs}=js,Ks=e=>e;function ao(e,t=Ks,n){const r=qs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Zs(r),r}const gr=(e,t)=>{const n=Gs(e),r=(o,i=t)=>ao(n,o,i);return Object.assign(r,n),r},Js=(e,t)=>e?gr(e,t):gr;function de(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Qs={value:()=>{}};function ln(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(e){this._=e}function ea(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=ln.prototype={constructor:Ut,on:function(e,t){var n=this._,r=ea(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=ta(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=mr(n[o],e.name,t);else if(t==null)for(o in n)n[o]=mr(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ut(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function ta(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function mr(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Qs,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var An="http://www.w3.org/1999/xhtml";const yr={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yr.hasOwnProperty(t)?{space:yr[t],local:e}:e}function na(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===An&&t.documentElement.namespaceURI===An?t.createElement(e):t.createElementNS(n,e)}}function ra(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function co(e){var t=un(e);return(t.local?ra:na)(t)}function oa(){}function Un(e){return e==null?oa:function(){return this.querySelector(e)}}function ia(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=e.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new pe(r,this._parents)}function sa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function aa(){return[]}function lo(e){return e==null?aa:function(){return this.querySelectorAll(e)}}function ca(e){return function(){return sa(e.apply(this,arguments))}}function la(e){typeof e=="function"?e=ca(e):e=lo(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),o.push(c));return new pe(r,o)}function uo(e){return function(){return this.matches(e)}}function fo(e){return function(t){return t.matches(e)}}var ua=Array.prototype.find;function fa(e){return function(){return ua.call(this.children,e)}}function da(){return this.firstElementChild}function ha(e){return this.select(e==null?da:fa(typeof e=="function"?e:fo(e)))}var pa=Array.prototype.filter;function ga(){return Array.from(this.children)}function ma(e){return function(){return pa.call(this.children,e)}}function ya(e){return this.selectAll(e==null?ga:ma(typeof e=="function"?e:fo(e)))}function xa(e){typeof e!="function"&&(e=uo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new pe(r,this._parents)}function ho(e){return new Array(e.length)}function wa(){return new pe(this._enter||this._groups.map(ho),this._parents)}function Kt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Kt.prototype={constructor:Kt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function va(e){return function(){return e}}function ba(e,t,n,r,o,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Kt(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function Sa(e,t,n,r,o,i,s){var a,c,u=new Map,l=t.length,f=i.length,p=new Array(l),h;for(a=0;a<l;++a)(c=t[a])&&(p[a]=h=s.call(c,c.__data__,a,t)+"",u.has(h)?o[a]=c:u.set(h,c));for(a=0;a<f;++a)h=s.call(e,i[a],a,i)+"",(c=u.get(h))?(r[a]=c,c.__data__=i[a],u.delete(h)):n[a]=new Kt(e,i[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(p[a])===c&&(o[a]=c)}function _a(e){return e.__data__}function Ea(e,t){if(!arguments.length)return Array.from(this,_a);var n=t?Sa:ba,r=this._parents,o=this._groups;typeof e!="function"&&(e=va(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=r[u],f=o[u],p=f.length,h=Na(e.call(l,l&&l.__data__,u,r)),y=h.length,g=a[u]=new Array(y),v=s[u]=new Array(y),m=c[u]=new Array(p);n(l,f,g,v,m,h,t);for(var _=0,C=0,x,N;_<y;++_)if(x=g[_]){for(_>=C&&(C=_+1);!(N=v[C])&&++C<y;);x._next=N||null}}return s=new pe(s,r),s._enter=a,s._exit=c,s}function Na(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ka(){return new pe(this._exit||this._groups.map(ho),this._parents)}function Ca(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Ma(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var u=n[c],l=r[c],f=u.length,p=a[c]=new Array(f),h,y=0;y<f;++y)(h=u[y]||l[y])&&(p[y]=h);for(;c<o;++c)a[c]=n[c];return new pe(a,this._parents)}function $a(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Ta(e){e||(e=Aa);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new pe(o,this._parents).order()}function Aa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function za(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ia(){return Array.from(this)}function Ra(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Da(){let e=0;for(const t of this)++e;return e}function Ha(){return!this.node()}function Pa(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function La(e){return function(){this.removeAttribute(e)}}function Oa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Va(e,t){return function(){this.setAttribute(e,t)}}function Fa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Wa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ba(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ya(e,t){var n=un(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Oa:La:typeof t=="function"?n.local?Ba:Wa:n.local?Fa:Va)(n,t))}function po(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xa(e){return function(){this.style.removeProperty(e)}}function ja(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ua(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ga(e,t,n){return arguments.length>1?this.each((t==null?Xa:typeof t=="function"?Ua:ja)(e,t,n??"")):dt(this.node(),e)}function dt(e,t){return e.style.getPropertyValue(t)||po(e).getComputedStyle(e,null).getPropertyValue(t)}function Za(e){return function(){delete this[e]}}function qa(e,t){return function(){this[e]=t}}function Ka(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ja(e,t){return arguments.length>1?this.each((t==null?Za:typeof t=="function"?Ka:qa)(e,t)):this.node()[e]}function go(e){return e.trim().split(/^|\s+/)}function Gn(e){return e.classList||new mo(e)}function mo(e){this._node=e,this._names=go(e.getAttribute("class")||"")}mo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yo(e,t){for(var n=Gn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function xo(e,t){for(var n=Gn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Qa(e){return function(){yo(this,e)}}function ec(e){return function(){xo(this,e)}}function tc(e,t){return function(){(t.apply(this,arguments)?yo:xo)(this,e)}}function nc(e,t){var n=go(e+"");if(arguments.length<2){for(var r=Gn(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?tc:t?Qa:ec)(n,t))}function rc(){this.textContent=""}function oc(e){return function(){this.textContent=e}}function ic(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function sc(e){return arguments.length?this.each(e==null?rc:(typeof e=="function"?ic:oc)(e)):this.node().textContent}function ac(){this.innerHTML=""}function cc(e){return function(){this.innerHTML=e}}function lc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uc(e){return arguments.length?this.each(e==null?ac:(typeof e=="function"?lc:cc)(e)):this.node().innerHTML}function fc(){this.nextSibling&&this.parentNode.appendChild(this)}function dc(){return this.each(fc)}function hc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pc(){return this.each(hc)}function gc(e){var t=typeof e=="function"?e:co(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function mc(){return null}function yc(e,t){var n=typeof e=="function"?e:co(e),r=t==null?mc:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xc(){var e=this.parentNode;e&&e.removeChild(this)}function wc(){return this.each(xc)}function vc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sc(e){return this.select(e?bc:vc)}function _c(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ec(e){return function(t){e.call(this,t,this.__data__)}}function Nc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function kc(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Cc(e,t,n){return function(){var r=this.__on,o,i=Ec(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Mc(e,t,n){var r=Nc(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(o=0,l=a[c];o<i;++o)if((s=r[o]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?Cc:kc,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function wo(e,t,n){var r=po(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function $c(e,t){return function(){return wo(this,e,t)}}function Tc(e,t){return function(){return wo(this,e,t.apply(this,arguments))}}function Ac(e,t){return this.each((typeof t=="function"?Tc:$c)(e,t))}function*zc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var vo=[null];function pe(e,t){this._groups=e,this._parents=t}function Dt(){return new pe([[document.documentElement]],vo)}function Ic(){return this}pe.prototype=Dt.prototype={constructor:pe,select:ia,selectAll:la,selectChild:ha,selectChildren:ya,filter:xa,data:Ea,enter:wa,exit:ka,join:Ca,merge:Ma,selection:Ic,order:$a,sort:Ta,call:za,nodes:Ia,node:Ra,size:Da,empty:Ha,each:Pa,attr:Ya,style:Ga,property:Ja,classed:nc,text:sc,html:uc,raise:dc,lower:pc,append:gc,insert:yc,remove:wc,clone:Sc,datum:_c,on:Mc,dispatch:Ac,[Symbol.iterator]:zc};function ge(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],vo)}function Rc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ve(e,t){if(e=Rc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Dc={passive:!1},Ct={capture:!0,passive:!1};function bn(e){e.stopImmediatePropagation()}function ct(e){e.preventDefault(),e.stopImmediatePropagation()}function bo(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",ct,Ct);"onselectstart"in t?n.on("selectstart.drag",ct,Ct):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function So(e,t){var n=e.document.documentElement,r=ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",ct,Ct),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Lt=e=>()=>e;function zn(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}zn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Hc(e){return!e.ctrlKey&&!e.button}function Pc(){return this.parentNode}function Lc(e,t){return t??{x:e.x,y:e.y}}function Oc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vc(){var e=Hc,t=Pc,n=Lc,r=Oc,o={},i=ln("start","drag","end"),s=0,a,c,u,l,f=0;function p(x){x.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",m,Dc).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(x,N){if(!(l||!e.call(this,x,N))){var $=C(this,t.call(this,x,N),x,N,"mouse");$&&(ge(x.view).on("mousemove.drag",y,Ct).on("mouseup.drag",g,Ct),bo(x.view),bn(x),u=!1,a=x.clientX,c=x.clientY,$("start",x))}}function y(x){if(ct(x),!u){var N=x.clientX-a,$=x.clientY-c;u=N*N+$*$>f}o.mouse("drag",x)}function g(x){ge(x.view).on("mousemove.drag mouseup.drag",null),So(x.view,u),ct(x),o.mouse("end",x)}function v(x,N){if(e.call(this,x,N)){var $=x.changedTouches,D=t.call(this,x,N),V=$.length,A,O;for(A=0;A<V;++A)(O=C(this,D,x,N,$[A].identifier,$[A]))&&(bn(x),O("start",x,$[A]))}}function m(x){var N=x.changedTouches,$=N.length,D,V;for(D=0;D<$;++D)(V=o[N[D].identifier])&&(ct(x),V("drag",x,N[D]))}function _(x){var N=x.changedTouches,$=N.length,D,V;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),D=0;D<$;++D)(V=o[N[D].identifier])&&(bn(x),V("end",x,N[D]))}function C(x,N,$,D,V,A){var O=i.copy(),P=ve(A||$,N),F,L,d;if((d=n.call(x,new zn("beforestart",{sourceEvent:$,target:p,identifier:V,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:O}),D))!=null)return F=d.x-P[0]||0,L=d.y-P[1]||0,function E(w,T,I){var S=P,M;switch(w){case"start":o[V]=E,M=s++;break;case"end":delete o[V],--s;case"drag":P=ve(I||T,N),M=s;break}O.call(w,x,new zn(w,{sourceEvent:T,subject:d,target:p,identifier:V,active:M,x:P[0]+F,y:P[1]+L,dx:P[0]-S[0],dy:P[1]-S[1],dispatch:O}),D)}}return p.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Lt(!!x),p):e},p.container=function(x){return arguments.length?(t=typeof x=="function"?x:Lt(x),p):t},p.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Lt(x),p):n},p.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Lt(!!x),p):r},p.on=function(){var x=i.on.apply(i,arguments);return x===i?p:x},p.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,p):Math.sqrt(f)},p}function Zn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _o(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ht(){}var Mt=.7,Jt=1/Mt,lt="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fc=/^#([0-9a-f]{3,8})$/,Wc=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),Bc=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Yc=new RegExp(`^rgba\\(${lt},${lt},${lt},${$t}\\)$`),Xc=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${$t}\\)$`),jc=new RegExp(`^hsl\\(${$t},${Ee},${Ee}\\)$`),Uc=new RegExp(`^hsla\\(${$t},${Ee},${Ee},${$t}\\)$`),xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zn(Ht,Tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wr,formatHex:wr,formatHex8:Gc,formatHsl:Zc,formatRgb:vr,toString:vr});function wr(){return this.rgb().formatHex()}function Gc(){return this.rgb().formatHex8()}function Zc(){return Eo(this).formatHsl()}function vr(){return this.rgb().formatRgb()}function Tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Fc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?br(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ot(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ot(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Wc.exec(e))?new fe(t[1],t[2],t[3],1):(t=Bc.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yc.exec(e))?Ot(t[1],t[2],t[3],t[4]):(t=Xc.exec(e))?Ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=jc.exec(e))?Er(t[1],t[2]/100,t[3]/100,1):(t=Uc.exec(e))?Er(t[1],t[2]/100,t[3]/100,t[4]):xr.hasOwnProperty(e)?br(xr[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function br(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function Ot(e,t,n,r){return r<=0&&(e=t=n=NaN),new fe(e,t,n,r)}function qc(e){return e instanceof Ht||(e=Tt(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function In(e,t,n,r){return arguments.length===1?qc(e):new fe(e,t,n,r??1)}function fe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Zn(fe,In,_o(Ht,{brighter(e){return e=e==null?Jt:Math.pow(Jt,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mt:Math.pow(Mt,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(Ge(this.r),Ge(this.g),Ge(this.b),Qt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sr,formatHex:Sr,formatHex8:Kc,formatRgb:_r,toString:_r}));function Sr(){return`#${je(this.r)}${je(this.g)}${je(this.b)}`}function Kc(){return`#${je(this.r)}${je(this.g)}${je(this.b)}${je((isNaN(this.opacity)?1:this.opacity)*255)}`}function _r(){const e=Qt(this.opacity);return`${e===1?"rgb(":"rgba("}${Ge(this.r)}, ${Ge(this.g)}, ${Ge(this.b)}${e===1?")":`, ${e})`}`}function Qt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ge(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function je(e){return e=Ge(e),(e<16?"0":"")+e.toString(16)}function Er(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new be(e,t,n,r)}function Eo(e){if(e instanceof be)return new be(e.h,e.s,e.l,e.opacity);if(e instanceof Ht||(e=Tt(e)),!e)return new be;if(e instanceof be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new be(s,a,c,e.opacity)}function Jc(e,t,n,r){return arguments.length===1?Eo(e):new be(e,t,n,r??1)}function be(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zn(be,Jc,_o(Ht,{brighter(e){return e=e==null?Jt:Math.pow(Jt,e),new be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mt:Math.pow(Mt,e),new be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new fe(Sn(e>=240?e-240:e+120,o,r),Sn(e,o,r),Sn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new be(Nr(this.h),Vt(this.s),Vt(this.l),Qt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qt(this.opacity);return`${e===1?"hsl(":"hsla("}${Nr(this.h)}, ${Vt(this.s)*100}%, ${Vt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nr(e){return e=(e||0)%360,e<0?e+360:e}function Vt(e){return Math.max(0,Math.min(1,e||0))}function Sn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const No=e=>()=>e;function Qc(e,t){return function(n){return e+n*t}}function el(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function tl(e){return(e=+e)==1?ko:function(t,n){return n-t?el(t,n,e):No(isNaN(t)?n:t)}}function ko(e,t){var n=t-e;return n?Qc(e,n):No(isNaN(e)?t:e)}const kr=function e(t){var n=tl(t);function r(o,i){var s=n((o=In(o)).r,(i=In(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=ko(o.opacity,i.opacity);return function(l){return o.r=s(l),o.g=a(l),o.b=c(l),o.opacity=u(l),o+""}}return r.gamma=e,r}(1);function De(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_n=new RegExp(Rn.source,"g");function nl(e){return function(){return e}}function rl(e){return function(t){return e(t)+""}}function ol(e,t){var n=Rn.lastIndex=_n.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Rn.exec(e))&&(o=_n.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:De(r,o)})),n=_n.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?rl(c[0].x):nl(t):(t=c.length,function(u){for(var l=0,f;l<t;++l)a[(f=c[l]).i]=f.x(u);return a.join("")})}var Cr=180/Math.PI,Dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Co(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Cr,skewX:Math.atan(c)*Cr,scaleX:s,scaleY:a}}var Ft;function il(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dn:Co(t.a,t.b,t.c,t.d,t.e,t.f)}function sl(e){return e==null||(Ft||(Ft=document.createElementNS("http://www.w3.org/2000/svg","g")),Ft.setAttribute("transform",e),!(e=Ft.transform.baseVal.consolidate()))?Dn:(e=e.matrix,Co(e.a,e.b,e.c,e.d,e.e,e.f))}function Mo(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,l,f,p,h,y){if(u!==f||l!==p){var g=h.push("translate(",null,t,null,n);y.push({i:g-4,x:De(u,f)},{i:g-2,x:De(l,p)})}else(f||p)&&h.push("translate("+f+t+p+n)}function s(u,l,f,p){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:De(u,l)})):l&&f.push(o(f)+"rotate("+l+r)}function a(u,l,f,p){u!==l?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:De(u,l)}):l&&f.push(o(f)+"skewX("+l+r)}function c(u,l,f,p,h,y){if(u!==f||l!==p){var g=h.push(o(h)+"scale(",null,",",null,")");y.push({i:g-4,x:De(u,f)},{i:g-2,x:De(l,p)})}else(f!==1||p!==1)&&h.push(o(h)+"scale("+f+","+p+")")}return function(u,l){var f=[],p=[];return u=e(u),l=e(l),i(u.translateX,u.translateY,l.translateX,l.translateY,f,p),s(u.rotate,l.rotate,f,p),a(u.skewX,l.skewX,f,p),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,p),u=l=null,function(h){for(var y=-1,g=p.length,v;++y<g;)f[(v=p[y]).i]=v.x(h);return f.join("")}}}var al=Mo(il,"px, ","px)","deg)"),cl=Mo(sl,", ",")",")"),ll=1e-12;function Mr(e){return((e=Math.exp(e))+1/e)/2}function ul(e){return((e=Math.exp(e))-1/e)/2}function fl(e){return((e=Math.exp(2*e))-1)/(e+1)}const dl=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],u=i[2],l=s[0],f=s[1],p=s[2],h=l-a,y=f-c,g=h*h+y*y,v,m;if(g<ll)m=Math.log(p/u)/t,v=function(D){return[a+D*h,c+D*y,u*Math.exp(t*D*m)]};else{var _=Math.sqrt(g),C=(p*p-u*u+r*g)/(2*u*n*_),x=(p*p-u*u-r*g)/(2*p*n*_),N=Math.log(Math.sqrt(C*C+1)-C),$=Math.log(Math.sqrt(x*x+1)-x);m=($-N)/t,v=function(D){var V=D*m,A=Mr(N),O=u/(n*_)*(A*fl(t*V+N)-ul(N));return[a+O*h,c+O*y,u*A/Mr(t*V+N)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var ht=0,Et=0,wt=0,$o=1e3,en,Nt,tn=0,qe=0,fn=0,At=typeof performance=="object"&&performance.now?performance:Date,To=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qn(){return qe||(To(hl),qe=At.now()+fn)}function hl(){qe=0}function nn(){this._call=this._time=this._next=null}nn.prototype=Ao.prototype={constructor:nn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qn():+n)+(t==null?0:+t),!this._next&&Nt!==this&&(Nt?Nt._next=this:en=this,Nt=this),this._call=e,this._time=n,Hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hn())}};function Ao(e,t,n){var r=new nn;return r.restart(e,t,n),r}function pl(){qn(),++ht;for(var e=en,t;e;)(t=qe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ht}function $r(){qe=(tn=At.now())+fn,ht=Et=0;try{pl()}finally{ht=0,ml(),qe=0}}function gl(){var e=At.now(),t=e-tn;t>$o&&(fn-=t,tn=e)}function ml(){for(var e,t=en,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:en=n);Nt=e,Hn(r)}function Hn(e){if(!ht){Et&&(Et=clearTimeout(Et));var t=e-qe;t>24?(e<1/0&&(Et=setTimeout($r,e-At.now()-fn)),wt&&(wt=clearInterval(wt))):(wt||(tn=At.now(),wt=setInterval(gl,$o)),ht=1,To($r))}}function Tr(e,t,n){var r=new nn;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var yl=ln("start","end","cancel","interrupt"),xl=[],zo=0,Ar=1,Pn=2,Gt=3,zr=4,Ln=5,Zt=6;function dn(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;wl(e,n,{name:t,index:r,group:o,on:yl,tween:xl,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:zo})}function Kn(e,t){var n=Se(e,t);if(n.state>zo)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=Se(e,t);if(n.state>Gt)throw new Error("too late; already running");return n}function Se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wl(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Ao(i,0,n.time);function i(u){n.state=Ar,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,f,p,h;if(n.state!==Ar)return c();for(l in r)if(h=r[l],h.name===n.name){if(h.state===Gt)return Tr(s);h.state===zr?(h.state=Zt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=Zt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(Tr(function(){n.state===Gt&&(n.state=zr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Pn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pn){for(n.state=Gt,o=new Array(p=n.tween.length),l=0,f=-1;l<p;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Ln,1),f=-1,p=o.length;++f<p;)o[f].call(e,l);n.state===Ln&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Zt,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function qt(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>Pn&&r.state<Ln,r.state=Zt,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function vl(e){return this.each(function(){qt(this,e)})}function bl(e,t){var n,r;return function(){var o=Ne(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Sl(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Ne(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function _l(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Se(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?bl:Sl)(n,e,t))}function Jn(e,t,n){var r=e._id;return e.each(function(){var o=Ne(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Se(o,r).value[t]}}function Io(e,t){var n;return(typeof t=="number"?De:t instanceof Tt?kr:(n=Tt(t))?(t=n,kr):ol)(e,t)}function El(e){return function(){this.removeAttribute(e)}}function Nl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kl(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Cl(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Ml(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function $l(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Tl(e,t){var n=un(e),r=n==="transform"?cl:Io;return this.attrTween(e,typeof t=="function"?(n.local?$l:Ml)(n,r,Jn(this,"attr."+e,t)):t==null?(n.local?Nl:El)(n):(n.local?Cl:kl)(n,r,t))}function Al(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Il(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&zl(e,i)),n}return o._value=t,o}function Rl(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Al(e,i)),n}return o._value=t,o}function Dl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=un(e);return this.tween(n,(r.local?Il:Rl)(r,t))}function Hl(e,t){return function(){Kn(this,e).delay=+t.apply(this,arguments)}}function Pl(e,t){return t=+t,function(){Kn(this,e).delay=t}}function Ll(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hl:Pl)(t,e)):Se(this.node(),t).delay}function Ol(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function Vl(e,t){return t=+t,function(){Ne(this,e).duration=t}}function Fl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ol:Vl)(t,e)):Se(this.node(),t).duration}function Wl(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function Bl(e){var t=this._id;return arguments.length?this.each(Wl(t,e)):Se(this.node(),t).ease}function Yl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function Xl(e){if(typeof e!="function")throw new Error;return this.each(Yl(this._id,e))}function jl(e){typeof e!="function"&&(e=uo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new ze(r,this._parents,this._name,this._id)}function Ul(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,f=s[a]=new Array(l),p,h=0;h<l;++h)(p=c[h]||u[h])&&(f[h]=p);for(;a<r;++a)s[a]=t[a];return new ze(s,this._parents,this._name,this._id)}function Gl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Zl(e,t,n){var r,o,i=Gl(t)?Kn:Ne;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function ql(e,t){var n=this._id;return arguments.length<2?Se(this.node(),n).on.on(e):this.each(Zl(n,e,t))}function Kl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Jl(){return this.on("end.remove",Kl(this._id))}function Ql(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,u=i[s]=new Array(c),l,f,p=0;p<c;++p)(l=a[p])&&(f=e.call(l,l.__data__,p,a))&&("__data__"in l&&(f.__data__=l.__data__),u[p]=f,dn(u[p],t,n,p,u,Se(l,n)));return new ze(i,this._parents,t,n)}function eu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lo(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var p=e.call(l,l.__data__,f,c),h,y=Se(l,n),g=0,v=p.length;g<v;++g)(h=p[g])&&dn(h,t,n,g,p,y);i.push(p),s.push(l)}return new ze(i,s,t,n)}var tu=Dt.prototype.constructor;function nu(){return new tu(this._groups,this._parents)}function ru(e,t){var n,r,o;return function(){var i=dt(this,e),s=(this.style.removeProperty(e),dt(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function Ro(e){return function(){this.style.removeProperty(e)}}function ou(e,t,n){var r,o=n+"",i;return function(){var s=dt(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function iu(e,t,n){var r,o,i;return function(){var s=dt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),dt(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function su(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=Ne(this,e),u=c.on,l=c.value[i]==null?a||(a=Ro(t)):void 0;(u!==n||o!==l)&&(r=(n=u).copy()).on(s,o=l),c.on=r}}function au(e,t,n){var r=(e+="")=="transform"?al:Io;return t==null?this.styleTween(e,ru(e,r)).on("end.style."+e,Ro(e)):typeof t=="function"?this.styleTween(e,iu(e,r,Jn(this,"style."+e,t))).each(su(this._id,e)):this.styleTween(e,ou(e,r,t),n).on("end.style."+e,null)}function cu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lu(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&cu(e,s,n)),r}return i._value=t,i}function uu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,lu(e,t,n??""))}function fu(e){return function(){this.textContent=e}}function du(e){return function(){var t=e(this);this.textContent=t??""}}function hu(e){return this.tween("text",typeof e=="function"?du(Jn(this,"text",e)):fu(e==null?"":e+""))}function pu(e){return function(t){this.textContent=e.call(this,t)}}function gu(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&pu(o)),t}return r._value=e,r}function mu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gu(e))}function yu(){for(var e=this._name,t=this._id,n=Do(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=Se(c,t);dn(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ze(r,this._parents,e,n)}function xu(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var u=Ne(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&i()})}var wu=0;function ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Do(){return++wu}var $e=Dt.prototype;ze.prototype={constructor:ze,select:Ql,selectAll:eu,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:jl,merge:Ul,selection:nu,transition:yu,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:ql,attr:Tl,attrTween:Dl,style:au,styleTween:uu,text:hu,textTween:mu,remove:Jl,tween:_l,delay:Ll,duration:Fl,ease:Bl,easeVarying:Xl,end:xu,[Symbol.iterator]:$e[Symbol.iterator]};function vu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var bu={time:null,delay:0,duration:250,ease:vu};function Su(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _u(e){var t,n;e instanceof ze?(t=e._id,e=e._name):(t=Do(),(n=bu).time=qn(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&dn(c,e,t,u,s,n||Su(c,t));return new ze(r,this._parents,e,t)}Dt.prototype.interrupt=vl;Dt.prototype.transition=_u;const Wt=e=>()=>e;function Eu(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ae=new Te(1,0,0);Te.prototype;function En(e){e.stopImmediatePropagation()}function vt(e){e.preventDefault(),e.stopImmediatePropagation()}function Nu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ku(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ir(){return this.__zoom||Ae}function Cu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Mu(){return navigator.maxTouchPoints||"ontouchstart"in this}function $u(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Ho(){var e=Nu,t=ku,n=$u,r=Cu,o=Mu,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=dl,u=ln("start","zoom","end"),l,f,p,h=500,y=150,g=0,v=10;function m(d){d.property("__zoom",Ir).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",O).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(d,E,w,T){var I=d.selection?d.selection():d;I.property("__zoom",Ir),d!==I?N(d,E,w,T):I.interrupt().each(function(){$(this,arguments).event(T).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},m.scaleBy=function(d,E,w,T){m.scaleTo(d,function(){var I=this.__zoom.k,S=typeof E=="function"?E.apply(this,arguments):E;return I*S},w,T)},m.scaleTo=function(d,E,w,T){m.transform(d,function(){var I=t.apply(this,arguments),S=this.__zoom,M=w==null?x(I):typeof w=="function"?w.apply(this,arguments):w,R=S.invert(M),H=typeof E=="function"?E.apply(this,arguments):E;return n(C(_(S,H),M,R),I,s)},w,T)},m.translateBy=function(d,E,w,T){m.transform(d,function(){return n(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),s)},null,T)},m.translateTo=function(d,E,w,T,I){m.transform(d,function(){var S=t.apply(this,arguments),M=this.__zoom,R=T==null?x(S):typeof T=="function"?T.apply(this,arguments):T;return n(Ae.translate(R[0],R[1]).scale(M.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof w=="function"?-w.apply(this,arguments):-w),S,s)},T,I)};function _(d,E){return E=Math.max(i[0],Math.min(i[1],E)),E===d.k?d:new Te(E,d.x,d.y)}function C(d,E,w){var T=E[0]-w[0]*d.k,I=E[1]-w[1]*d.k;return T===d.x&&I===d.y?d:new Te(d.k,T,I)}function x(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function N(d,E,w,T){d.on("start.zoom",function(){$(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(T).end()}).tween("zoom",function(){var I=this,S=arguments,M=$(I,S).event(T),R=t.apply(I,S),H=w==null?x(R):typeof w=="function"?w.apply(I,S):w,B=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),W=I.__zoom,j=typeof E=="function"?E.apply(I,S):E,U=c(W.invert(H).concat(B/W.k),j.invert(H).concat(B/j.k));return function(Z){if(Z===1)Z=j;else{var J=U(Z),K=B/J[2];Z=new Te(K,H[0]-J[0]*K,H[1]-J[1]*K)}M.zoom(null,Z)}})}function $(d,E,w){return!w&&d.__zooming||new D(d,E)}function D(d,E){this.that=d,this.args=E,this.active=0,this.sourceEvent=null,this.extent=t.apply(d,E),this.taps=0}D.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,E){return this.mouse&&d!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var E=ge(this.that).datum();u.call(d,this.that,new Eu(d,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),E)}};function V(d,...E){if(!e.apply(this,arguments))return;var w=$(this,E).event(d),T=this.__zoom,I=Math.max(i[0],Math.min(i[1],T.k*Math.pow(2,r.apply(this,arguments)))),S=ve(d);if(w.wheel)(w.mouse[0][0]!==S[0]||w.mouse[0][1]!==S[1])&&(w.mouse[1]=T.invert(w.mouse[0]=S)),clearTimeout(w.wheel);else{if(T.k===I)return;w.mouse=[S,T.invert(S)],qt(this),w.start()}vt(d),w.wheel=setTimeout(M,y),w.zoom("mouse",n(C(_(T,I),w.mouse[0],w.mouse[1]),w.extent,s));function M(){w.wheel=null,w.end()}}function A(d,...E){if(p||!e.apply(this,arguments))return;var w=d.currentTarget,T=$(this,E,!0).event(d),I=ge(d.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",B,!0),S=ve(d,w),M=d.clientX,R=d.clientY;bo(d.view),En(d),T.mouse=[S,this.__zoom.invert(S)],qt(this),T.start();function H(W){if(vt(W),!T.moved){var j=W.clientX-M,U=W.clientY-R;T.moved=j*j+U*U>g}T.event(W).zoom("mouse",n(C(T.that.__zoom,T.mouse[0]=ve(W,w),T.mouse[1]),T.extent,s))}function B(W){I.on("mousemove.zoom mouseup.zoom",null),So(W.view,T.moved),vt(W),T.event(W).end()}}function O(d,...E){if(e.apply(this,arguments)){var w=this.__zoom,T=ve(d.changedTouches?d.changedTouches[0]:d,this),I=w.invert(T),S=w.k*(d.shiftKey?.5:2),M=n(C(_(w,S),T,I),t.apply(this,E),s);vt(d),a>0?ge(this).transition().duration(a).call(N,M,T,d):ge(this).call(m.transform,M,T,d)}}function P(d,...E){if(e.apply(this,arguments)){var w=d.touches,T=w.length,I=$(this,E,d.changedTouches.length===T).event(d),S,M,R,H;for(En(d),M=0;M<T;++M)R=w[M],H=ve(R,this),H=[H,this.__zoom.invert(H),R.identifier],I.touch0?!I.touch1&&I.touch0[2]!==H[2]&&(I.touch1=H,I.taps=0):(I.touch0=H,S=!0,I.taps=1+!!l);l&&(l=clearTimeout(l)),S&&(I.taps<2&&(f=H[0],l=setTimeout(function(){l=null},h)),qt(this),I.start())}}function F(d,...E){if(this.__zooming){var w=$(this,E).event(d),T=d.changedTouches,I=T.length,S,M,R,H;for(vt(d),S=0;S<I;++S)M=T[S],R=ve(M,this),w.touch0&&w.touch0[2]===M.identifier?w.touch0[0]=R:w.touch1&&w.touch1[2]===M.identifier&&(w.touch1[0]=R);if(M=w.that.__zoom,w.touch1){var B=w.touch0[0],W=w.touch0[1],j=w.touch1[0],U=w.touch1[1],Z=(Z=j[0]-B[0])*Z+(Z=j[1]-B[1])*Z,J=(J=U[0]-W[0])*J+(J=U[1]-W[1])*J;M=_(M,Math.sqrt(Z/J)),R=[(B[0]+j[0])/2,(B[1]+j[1])/2],H=[(W[0]+U[0])/2,(W[1]+U[1])/2]}else if(w.touch0)R=w.touch0[0],H=w.touch0[1];else return;w.zoom("touch",n(C(M,R,H),w.extent,s))}}function L(d,...E){if(this.__zooming){var w=$(this,E).event(d),T=d.changedTouches,I=T.length,S,M;for(En(d),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),S=0;S<I;++S)M=T[S],w.touch0&&w.touch0[2]===M.identifier?delete w.touch0:w.touch1&&w.touch1[2]===M.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(M=ve(M,this),Math.hypot(f[0]-M[0],f[1]-M[1])<v)){var R=ge(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return m.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:Wt(+d),m):r},m.filter=function(d){return arguments.length?(e=typeof d=="function"?d:Wt(!!d),m):e},m.touchable=function(d){return arguments.length?(o=typeof d=="function"?d:Wt(!!d),m):o},m.extent=function(d){return arguments.length?(t=typeof d=="function"?d:Wt([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),m):t},m.scaleExtent=function(d){return arguments.length?(i[0]=+d[0],i[1]=+d[1],m):[i[0],i[1]]},m.translateExtent=function(d){return arguments.length?(s[0][0]=+d[0][0],s[1][0]=+d[1][0],s[0][1]=+d[0][1],s[1][1]=+d[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(d){return arguments.length?(n=d,m):n},m.duration=function(d){return arguments.length?(a=+d,m):a},m.interpolate=function(d){return arguments.length?(c=d,m):c},m.on=function(){var d=u.on.apply(u,arguments);return d===u?m:d},m.clickDistance=function(d){return arguments.length?(g=(d=+d)*d,m):Math.sqrt(g)},m.tapDistance=function(d){return arguments.length?(v=+d,m):v},m}const hn=b.createContext(null),Tu=hn.Provider,Ie={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Po=Ie.error001();function ee(e,t){const n=b.useContext(hn);if(n===null)throw new Error(Po);return ao(n,e,t)}const oe=()=>{const e=b.useContext(hn);if(e===null)throw new Error(Po);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Au=e=>e.userSelectionActive?"none":"all";function Qn({position:e,children:t,className:n,style:r,...o}){const i=ee(Au),s=`${e}`.split("-");return k.createElement("div",{className:se(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},t)}function zu({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:k.createElement(Qn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},k.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Iu=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const f=b.useRef(null),[p,h]=b.useState({x:0,y:0,width:0,height:0}),y=se(["react-flow__edge-textwrapper",u]);return b.useEffect(()=>{if(f.current){const g=f.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:k.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...l},o&&k.createElement("rect",{width:p.width+2*s[0],x:-s[0],y:-s[1],height:p.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),k.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:r},n),c)};var Ru=b.memo(Iu);const er=e=>({width:e.offsetWidth,height:e.offsetHeight}),pt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tr=(e={x:0,y:0},t)=>({x:pt(e.x,t[0][0],t[1][0]),y:pt(e.y,t[0][1],t[1][1])}),Rr=(e,t,n)=>e<t?pt(Math.abs(e-t),1,50)/50:e>n?-pt(Math.abs(e-n),1,50)/50:0,Lo=(e,t)=>{const n=Rr(e.x,35,t.width-35)*20,r=Rr(e.y,35,t.height-35)*20;return[n,r]},Oo=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Vo=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),zt=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Fo=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Dr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Du=(e,t)=>Fo(Vo(zt(e),zt(t))),On=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Hu=e=>me(e.width)&&me(e.height)&&me(e.x)&&me(e.y),me=e=>!isNaN(e)&&isFinite(e),te=Symbol.for("internals"),Wo=["Enter"," ","Escape"],Pu=(e,t)=>{},Lu=e=>"nativeEvent"in e;function Vn(e){var o,i;const t=Lu(e)?e.nativeEvent:e,n=((i=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Bo=e=>"clientX"in e,Le=(e,t)=>{var i,s;const n=Bo(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},rn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Pt=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:p,interactionWidth:h=20})=>k.createElement(k.Fragment,null,k.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),h&&k.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&me(n)&&me(r)?k.createElement(Ru,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Pt.displayName="BaseEdge";function bt(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(i=>i.id===e);o&&n(r,{...o})}}function Yo({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function Xo({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,l=Math.abs(c-e),f=Math.abs(u-t);return[c,u,l,f]}var Ke;(function(e){e.Strict="strict",e.Loose="loose"})(Ke||(Ke={}));var Ue;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ue||(Ue={}));var It;(function(e){e.Partial="partial",e.Full="full"})(It||(It={}));var Pe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Pe||(Pe={}));var on;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(on||(on={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Hr({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function jo({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top}){const[s,a]=Hr({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=Hr({pos:i,x1:r,y1:o,x2:e,y2:t}),[l,f,p,h]=Xo({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${r},${o}`,l,f,p,h]}const nr=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:y,interactionWidth:g})=>{const[v,m,_]=jo({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return k.createElement(Pt,{path:v,labelX:m,labelY:_,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:y,interactionWidth:g})});nr.displayName="SimpleBezierEdge";const Pr={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},Ou=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Lr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Vu({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:o,offset:i}){const s=Pr[t],a=Pr[r],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},l=Ou({source:c,sourcePosition:t,target:u}),f=l.x!==0?"x":"y",p=l[f];let h=[],y,g;const v={x:0,y:0},m={x:0,y:0},[_,C,x,N]=Yo({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){y=o.x??_,g=o.y??C;const D=[{x:y,y:c.y},{x:y,y:u.y}],V=[{x:c.x,y:g},{x:u.x,y:g}];s[f]===p?h=f==="x"?D:V:h=f==="x"?V:D}else{const D=[{x:c.x,y:u.y}],V=[{x:u.x,y:c.y}];if(f==="x"?h=s.x===p?V:D:h=s.y===p?D:V,t===r){const L=Math.abs(e[f]-n[f]);if(L<=i){const d=Math.min(i-1,i-L);s[f]===p?v[f]=(c[f]>e[f]?-1:1)*d:m[f]=(u[f]>n[f]?-1:1)*d}}if(t!==r){const L=f==="x"?"y":"x",d=s[f]===a[L],E=c[L]>u[L],w=c[L]<u[L];(s[f]===1&&(!d&&E||d&&w)||s[f]!==1&&(!d&&w||d&&E))&&(h=f==="x"?D:V)}const A={x:c.x+v.x,y:c.y+v.y},O={x:u.x+m.x,y:u.y+m.y},P=Math.max(Math.abs(A.x-h[0].x),Math.abs(O.x-h[0].x)),F=Math.max(Math.abs(A.y-h[0].y),Math.abs(O.y-h[0].y));P>=F?(y=(A.x+O.x)/2,g=h[0].y):(y=h[0].x,g=(A.y+O.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...h,{x:u.x+m.x,y:u.y+m.y},n],y,g,x,N]}function Fu(e,t,n,r){const o=Math.min(Lr(e,t)/2,Lr(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function Fn({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[l,f,p,h,y]=Vu({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:u});return[l.reduce((v,m,_)=>{let C="";return _>0&&_<l.length-1?C=Fu(l[_-1],m,l[_+1],s):C=`${_===0?"M":"L"}${m.x} ${m.y}`,v+=C,v},""),f,p,h,y]}const pn=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:f=Y.Bottom,targetPosition:p=Y.Top,markerEnd:h,markerStart:y,pathOptions:g,interactionWidth:v})=>{const[m,_,C]=Fn({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:p,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return k.createElement(Pt,{path:m,labelX:_,labelY:C,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:y,interactionWidth:v})});pn.displayName="SmoothStepEdge";const rr=b.memo(e=>{var t;return k.createElement(pn,{...e,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});rr.displayName="StepEdge";function Wu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=Yo({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const or=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:p,interactionWidth:h})=>{const[y,g,v]=Wu({sourceX:e,sourceY:t,targetX:n,targetY:r});return k.createElement(Pt,{path:y,labelX:g,labelY:v,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:p,interactionWidth:h})});or.displayName="StraightEdge";function Bt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Or({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case Y.Left:return[t-Bt(t-r,i),n];case Y.Right:return[t+Bt(r-t,i),n];case Y.Top:return[t,n-Bt(n-o,i)];case Y.Bottom:return[t,n+Bt(o-n,i)]}}function Uo({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top,curvature:s=.25}){const[a,c]=Or({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[u,l]=Or({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[f,p,h,y]=Xo({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${r},${o}`,f,p,h,y]}const sn=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:y,pathOptions:g,interactionWidth:v})=>{const[m,_,C]=Uo({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:g==null?void 0:g.curvature});return k.createElement(Pt,{path:m,labelX:_,labelY:C,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:y,interactionWidth:v})});sn.displayName="BezierEdge";const ir=b.createContext(null),Bu=ir.Provider;ir.Consumer;const Yu=()=>b.useContext(ir),Xu=e=>"id"in e&&"source"in e&&"target"in e,ju=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Wn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Uu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Go=(e,t)=>{if(!e.source||!e.target)return t;let n;return Xu(e)?n={...e}:n={...e,id:ju(e)},Uu(n,t)?t:t.concat(n)},Bn=({x:e,y:t},[n,r,o],i,[s,a])=>{const c={x:(e-n)/o,y:(t-r)/o};return i?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},Zo=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Ze=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},gn=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:i,y:s}=Ze(o,t).positionAbsolute;return Vo(r,zt({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Fo(n)},qo=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1,a=[0,0])=>{const c={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(l=>{const{width:f,height:p,selectable:h=!0,hidden:y=!1}=l;if(s&&!h||y)return!1;const{positionAbsolute:g}=Ze(l,a),v={x:g.x,y:g.y,width:f||0,height:p||0},m=On(c,v),_=typeof f>"u"||typeof p>"u"||f===null||p===null,C=i&&m>0,x=(f||0)*(p||0);(_||C||m>=x||l.dragging)&&u.push(l)}),u},Ko=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Jo=(e,t,n,r,o,i=.1)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=pt(c,r,o),l=e.x+e.width/2,f=e.y+e.height/2,p=t/2-l*u,h=n/2-f*u;return{x:p,y:h,zoom:u}},Xe=(e,t=0)=>e.transition().duration(t);function Vr(e,t,n,r){return(t[n]||[]).reduce((o,i)=>{var s,a;return`${e.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+i.y+i.height/2}),o},[])}function Gu(e,t,n,r,o,i){const{x:s,y:a}=Le(e),u=t.elementsFromPoint(s,a).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const g=sr(void 0,u),v=u.getAttribute("data-handleid"),m=i({nodeId:y,id:v,type:g});if(m){const _=o.find(C=>C.nodeId===y&&C.type===g&&C.id===v);return{handle:{id:v,type:g,nodeId:y,x:(_==null?void 0:_.x)||n.x,y:(_==null?void 0:_.y)||n.y},validHandleResult:m}}}}let l=[],f=1/0;if(o.forEach(y=>{const g=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(g<=r){const v=i(y);g<=f&&(g<f?l=[{handle:y,validHandleResult:v}]:g===f&&l.push({handle:y,validHandleResult:v}),f=g)}}),!l.length)return{handle:null,validHandleResult:Qo()};if(l.length===1)return l[0];const p=l.some(({validHandleResult:y})=>y.isValid),h=l.some(({handle:y})=>y.type==="target");return l.find(({handle:y,validHandleResult:g})=>h?y.type==="target":p?g.isValid:!0)||l[0]}const Zu={source:null,target:null,sourceHandle:null,targetHandle:null},Qo=()=>({handleDomNode:null,isValid:!1,connection:Zu,endHandle:null});function ei(e,t,n,r,o,i,s){const a=o==="target",c=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Qo(),handleDomNode:c};if(c){const l=sr(void 0,c),f=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),y=c.classList.contains("connectableend"),g={source:a?f:n,sourceHandle:a?p:r,target:a?n:f,targetHandle:a?r:p};u.connection=g,h&&y&&(t===Ke.Strict?a&&l==="source"||!a&&l==="target":f!==n||p!==r)&&(u.endHandle={nodeId:f,handleId:p,type:l},u.isValid=i(g))}return u}function qu({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,i)=>{if(i[te]){const{handleBounds:s}=i[te];let a=[],c=[];s&&(a=Vr(i,s,"source",`${t}-${n}-${r}`),c=Vr(i,s,"target",`${t}-${n}-${r}`)),o.push(...a,...c)}return o},[])}function sr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Nn(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Ku(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function ti({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const l=Oo(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:h,connectionRadius:y,onConnectStart:g,panBy:v,getNodes:m,cancelConnection:_}=i();let C=0,x;const{x:N,y:$}=Le(e),D=l==null?void 0:l.elementFromPoint(N,$),V=sr(c,D),A=p==null?void 0:p.getBoundingClientRect();if(!A||!V)return;let O,P=Le(e,A),F=!1,L=null,d=!1,E=null;const w=qu({nodes:m(),nodeId:n,handleId:t,handleType:V}),T=()=>{if(!h)return;const[M,R]=Lo(P,A);v({x:M,y:R}),C=requestAnimationFrame(T)};s({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:V,connectionStartHandle:{nodeId:n,handleId:t,type:V},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:V});function I(M){const{transform:R}=i();P=Le(M,A);const{handle:H,validHandleResult:B}=Gu(M,l,Bn(P,R,!1,[1,1]),y,w,W=>ei(W,f,n,t,o?"target":"source",a,l));if(x=H,F||(T(),F=!0),E=B.handleDomNode,L=B.connection,d=B.isValid,s({connectionPosition:x&&d?Zo({x:x.x,y:x.y},R):P,connectionStatus:Ku(!!x,d),connectionEndHandle:B.endHandle}),!x&&!d&&!E)return Nn(O);L.source!==L.target&&E&&(Nn(O),O=E,E.classList.add("connecting","react-flow__handle-connecting"),E.classList.toggle("valid",d),E.classList.toggle("react-flow__handle-valid",d))}function S(M){var R,H;(x||E)&&L&&d&&(r==null||r(L)),(H=(R=i()).onConnectEnd)==null||H.call(R,M),c&&(u==null||u(M)),Nn(O),_(),cancelAnimationFrame(C),F=!1,d=!1,L=null,E=null,l.removeEventListener("mousemove",I),l.removeEventListener("mouseup",S),l.removeEventListener("touchmove",I),l.removeEventListener("touchend",S)}l.addEventListener("mousemove",I),l.addEventListener("mouseup",S),l.addEventListener("touchmove",I),l.addEventListener("touchend",S)}const Fr=()=>!0,Ju=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Qu=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},ni=b.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:f,...p},h)=>{var A,O;const y=s||null,g=e==="target",v=oe(),m=Yu(),{connectOnClick:_,noPanClassName:C}=ee(Ju,de),{connecting:x,clickConnecting:N}=ee(Qu(m,y,e),de);m||(O=(A=v.getState()).onError)==null||O.call(A,"010",Ie.error010());const $=P=>{const{defaultEdgeOptions:F,onConnect:L,hasDefaultEdges:d}=v.getState(),E={...F,...P};if(d){const{edges:w,setEdges:T}=v.getState();T(Go(E,w))}L==null||L(E),a==null||a(E)},D=P=>{if(!m)return;const F=Bo(P);o&&(F&&P.button===0||!F)&&ti({event:P,handleId:y,nodeId:m,onConnect:$,isTarget:g,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||Fr}),F?l==null||l(P):f==null||f(P)},V=P=>{const{onClickConnectStart:F,onClickConnectEnd:L,connectionClickStartHandle:d,connectionMode:E,isValidConnection:w}=v.getState();if(!m||!d&&!o)return;if(!d){F==null||F(P,{nodeId:m,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:y}});return}const T=Oo(P.target),I=n||w||Fr,{connection:S,isValid:M}=ei({nodeId:m,id:y,type:e},E,d.nodeId,d.handleId||null,d.type,I,T);M&&$(S),L==null||L(P),v.setState({connectionClickStartHandle:null})};return k.createElement("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${y}-${e}`,className:se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!g,target:g,connectable:r,connectablestart:o,connectableend:i,connecting:N,connectionindicator:r&&(o&&!x||i&&x)}]),onMouseDown:D,onTouchStart:D,onClick:_?V:void 0,ref:h,...p},c)});ni.displayName="Handle";var ye=b.memo(ni);const ri=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>k.createElement(k.Fragment,null,k.createElement(ye,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,k.createElement(ye,{type:"source",position:r,isConnectable:t}));ri.displayName="DefaultNode";var Yn=b.memo(ri);const oi=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>k.createElement(k.Fragment,null,e==null?void 0:e.label,k.createElement(ye,{type:"source",position:n,isConnectable:t}));oi.displayName="InputNode";var ii=b.memo(oi);const si=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>k.createElement(k.Fragment,null,k.createElement(ye,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);si.displayName="OutputNode";var ai=b.memo(si);const ar=()=>null;ar.displayName="GroupNode";const ef=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Yt=e=>e.id;function tf(e,t){return de(e.selectedNodes.map(Yt),t.selectedNodes.map(Yt))&&de(e.selectedEdges.map(Yt),t.selectedEdges.map(Yt))}const ci=b.memo(({onSelectionChange:e})=>{const t=oe(),{selectedNodes:n,selectedEdges:r}=ee(ef,tf);return b.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(i=>i(o))},[n,r,e]),null});ci.displayName="SelectionListener";const nf=e=>!!e.onSelectionChange;function rf({onSelectionChange:e}){const t=ee(nf);return e||t?k.createElement(ci,{onSelectionChange:e}):null}const of=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function rt(e,t){b.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function G(e,t,n){b.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const sf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:h,elevateNodesOnSelect:y,minZoom:g,maxZoom:v,nodeExtent:m,onNodesChange:_,onEdgesChange:C,elementsSelectable:x,connectionMode:N,snapGrid:$,snapToGrid:D,translateExtent:V,connectOnClick:A,defaultEdgeOptions:O,fitView:P,fitViewOptions:F,onNodesDelete:L,onEdgesDelete:d,onNodeDrag:E,onNodeDragStart:w,onNodeDragStop:T,onSelectionDrag:I,onSelectionDragStart:S,onSelectionDragStop:M,noPanClassName:R,nodeOrigin:H,rfId:B,autoPanOnConnect:W,autoPanOnNodeDrag:j,onError:U,connectionRadius:Z,isValidConnection:J,nodeDragThreshold:K})=>{const{setNodes:q,setEdges:ie,setDefaultNodesAndEdges:re,setMinZoom:le,setMaxZoom:ae,setTranslateExtent:ne,setNodeExtent:he,reset:Q}=ee(of,de),X=oe();return b.useEffect(()=>{const ue=r==null?void 0:r.map(ke=>({...ke,...O}));return re(n,ue),()=>{Q()}},[]),G("defaultEdgeOptions",O,X.setState),G("connectionMode",N,X.setState),G("onConnect",o,X.setState),G("onConnectStart",i,X.setState),G("onConnectEnd",s,X.setState),G("onClickConnectStart",a,X.setState),G("onClickConnectEnd",c,X.setState),G("nodesDraggable",u,X.setState),G("nodesConnectable",l,X.setState),G("nodesFocusable",f,X.setState),G("edgesFocusable",p,X.setState),G("edgesUpdatable",h,X.setState),G("elementsSelectable",x,X.setState),G("elevateNodesOnSelect",y,X.setState),G("snapToGrid",D,X.setState),G("snapGrid",$,X.setState),G("onNodesChange",_,X.setState),G("onEdgesChange",C,X.setState),G("connectOnClick",A,X.setState),G("fitViewOnInit",P,X.setState),G("fitViewOnInitOptions",F,X.setState),G("onNodesDelete",L,X.setState),G("onEdgesDelete",d,X.setState),G("onNodeDrag",E,X.setState),G("onNodeDragStart",w,X.setState),G("onNodeDragStop",T,X.setState),G("onSelectionDrag",I,X.setState),G("onSelectionDragStart",S,X.setState),G("onSelectionDragStop",M,X.setState),G("noPanClassName",R,X.setState),G("nodeOrigin",H,X.setState),G("rfId",B,X.setState),G("autoPanOnConnect",W,X.setState),G("autoPanOnNodeDrag",j,X.setState),G("onError",U,X.setState),G("connectionRadius",Z,X.setState),G("isValidConnection",J,X.setState),G("nodeDragThreshold",K,X.setState),rt(e,q),rt(t,ie),rt(g,le),rt(v,ae),rt(V,ne),rt(m,he),null},Wr={display:"none"},af={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},li="react-flow__node-desc",ui="react-flow__edge-desc",cf="react-flow__aria-live",lf=e=>e.ariaLiveMessage;function uf({rfId:e}){const t=ee(lf);return k.createElement("div",{id:`${cf}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:af},t)}function ff({rfId:e,disableKeyboardA11y:t}){return k.createElement(k.Fragment,null,k.createElement("div",{id:`${li}-${e}`,style:Wr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),k.createElement("div",{id:`${ui}-${e}`,style:Wr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&k.createElement(uf,{rfId:e}))}var Rt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,a]=b.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),l=u.reduce((f,p)=>f.concat(...p),[]);return[u,l]}return[[],[]]},[e]);return b.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const l=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Vn(h))return!1;const g=Yr(h.code,a);i.current.add(h[g]),Br(s,i.current,!1)&&(h.preventDefault(),r(!0))},f=h=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Vn(h))return!1;const g=Yr(h.code,a);Br(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(h[g]),h.key==="Meta"&&i.current.clear(),o.current=!1},p=()=>{i.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",l),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",l),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,r]),n};function Br(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Yr(e,t){return t.includes(e)?"code":"key"}function fi(e,t,n,r){var a,c;const o=e.parentNode||e.parentId;if(!o)return n;const i=t.get(o),s=Ze(i,r);return fi(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((a=i[te])==null?void 0:a.z)??0)>(n.z??0)?((c=i[te])==null?void 0:c.z)??0:n.z??0},r)}function di(e,t,n){e.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:a,z:c}=fi(r,e,{...r.position,z:((i=r[te])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:a},r[te].z=c,n!=null&&n[r.id]&&(r[te].isParent=!0)}})}function kn(e,t,n,r){const o=new Map,i={},s=r?1e3:0;return e.forEach(a=>{var h;const c=(me(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(i[f]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(l,te,{enumerable:!1,value:{handleBounds:p||(h=u==null?void 0:u[te])==null?void 0:h.handleBounds,z:c}}),o.set(a.id,l)}),di(o,n,i),o}function hi(e,t={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:f}=e(),p=t.initial&&!u&&l;if(a&&c&&(p||!t.initial)){const y=n().filter(v=>{var _;const m=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(_=t.nodes)!=null&&_.length?m&&t.nodes.some(C=>C.id===v.id):m}),g=y.every(v=>v.width&&v.height);if(y.length>0&&g){const v=gn(y,f),{x:m,y:_,zoom:C}=Jo(v,r,o,t.minZoom??i,t.maxZoom??s,t.padding??.1),x=Ae.translate(m,_).scale(C);return typeof t.duration=="number"&&t.duration>0?a.transform(Xe(c,t.duration),x):a.transform(c,x),!0}}return!1}function df(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[te]:r[te],selected:n.selected})}),new Map(t)}function hf(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Xt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:df(e,o)}),s==null||s(e)),t!=null&&t.length&&(u&&r({edges:hf(t,i)}),a==null||a(t))}const ot=()=>{},pf={zoomIn:ot,zoomOut:ot,zoomTo:ot,getZoom:()=>1,setViewport:ot,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ot,fitBounds:ot,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},gf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),mf=()=>{const e=oe(),{d3Zoom:t,d3Selection:n}=ee(gf,de);return b.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Xe(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Xe(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>t.scaleTo(Xe(n,i==null?void 0:i.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,i)=>{const[s,a,c]=e.getState().transform,u=Ae.translate(o.x??s,o.y??a).scale(o.zoom??c);t.transform(Xe(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[o,i,s]=e.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>hi(e.getState,o),setCenter:(o,i,s)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,f=a/2-o*l,p=c/2-i*l,h=Ae.translate(f,p).scale(l);t.transform(Xe(n,s==null?void 0:s.duration),h)},fitBounds:(o,i)=>{const{width:s,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:f,zoom:p}=Jo(o,s,a,c,u,(i==null?void 0:i.padding)??.1),h=Ae.translate(l,f).scale(p);t.transform(Xe(n,i==null?void 0:i.duration),h)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Bn(o,i,s,a)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:a,domNode:c}=e.getState();if(!c)return o;const{x:u,y:l}=c.getBoundingClientRect(),f={x:o.x-u,y:o.y-l};return Bn(f,i,s,a)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=e.getState();if(!s)return o;const{x:a,y:c}=s.getBoundingClientRect(),u=Zo(o,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:pf,[t,n])};function mn(){const e=mf(),t=oe(),n=b.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=b.useCallback(g=>t.getState().nodeInternals.get(g),[]),o=b.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(v=>({...v}))},[]),i=b.useCallback(g=>{const{edges:v=[]}=t.getState();return v.find(m=>m.id===g)},[]),s=b.useCallback(g=>{const{getNodes:v,setNodes:m,hasDefaultNodes:_,onNodesChange:C}=t.getState(),x=v(),N=typeof g=="function"?g(x):g;if(_)m(N);else if(C){const $=N.length===0?x.map(D=>({type:"remove",id:D.id})):N.map(D=>({item:D,type:"reset"}));C($)}},[]),a=b.useCallback(g=>{const{edges:v=[],setEdges:m,hasDefaultEdges:_,onEdgesChange:C}=t.getState(),x=typeof g=="function"?g(v):g;if(_)m(x);else if(C){const N=x.length===0?v.map($=>({type:"remove",id:$.id})):x.map($=>({item:$,type:"reset"}));C(N)}},[]),c=b.useCallback(g=>{const v=Array.isArray(g)?g:[g],{getNodes:m,setNodes:_,hasDefaultNodes:C,onNodesChange:x}=t.getState();if(C){const $=[...m(),...v];_($)}else if(x){const N=v.map($=>({item:$,type:"add"}));x(N)}},[]),u=b.useCallback(g=>{const v=Array.isArray(g)?g:[g],{edges:m=[],setEdges:_,hasDefaultEdges:C,onEdgesChange:x}=t.getState();if(C)_([...m,...v]);else if(x){const N=v.map($=>({item:$,type:"add"}));x(N)}},[]),l=b.useCallback(()=>{const{getNodes:g,edges:v=[],transform:m}=t.getState(),[_,C,x]=m;return{nodes:g().map(N=>({...N})),edges:v.map(N=>({...N})),viewport:{x:_,y:C,zoom:x}}},[]),f=b.useCallback(({nodes:g,edges:v})=>{const{nodeInternals:m,getNodes:_,edges:C,hasDefaultNodes:x,hasDefaultEdges:N,onNodesDelete:$,onEdgesDelete:D,onNodesChange:V,onEdgesChange:A}=t.getState(),O=(g||[]).map(E=>E.id),P=(v||[]).map(E=>E.id),F=_().reduce((E,w)=>{const T=w.parentNode||w.parentId,I=!O.includes(w.id)&&T&&E.find(M=>M.id===T);return(typeof w.deletable=="boolean"?w.deletable:!0)&&(O.includes(w.id)||I)&&E.push(w),E},[]),L=C.filter(E=>typeof E.deletable=="boolean"?E.deletable:!0),d=L.filter(E=>P.includes(E.id));if(F||d){const E=Ko(F,L),w=[...d,...E],T=w.reduce((I,S)=>(I.includes(S.id)||I.push(S.id),I),[]);if((N||x)&&(N&&t.setState({edges:C.filter(I=>!T.includes(I.id))}),x&&(F.forEach(I=>{m.delete(I.id)}),t.setState({nodeInternals:new Map(m)}))),T.length>0&&(D==null||D(w),A&&A(T.map(I=>({id:I,type:"remove"})))),F.length>0&&($==null||$(F),V)){const I=F.map(S=>({id:S.id,type:"remove"}));V(I)}}},[]),p=b.useCallback(g=>{const v=Hu(g),m=v?null:t.getState().nodeInternals.get(g.id);return!v&&!m?[null,null,v]:[v?g:Dr(m),m,v]},[]),h=b.useCallback((g,v=!0,m)=>{const[_,C,x]=p(g);return _?(m||t.getState().getNodes()).filter(N=>{if(!x&&(N.id===C.id||!N.positionAbsolute))return!1;const $=Dr(N),D=On($,_);return v&&D>0||D>=_.width*_.height}):[]},[]),y=b.useCallback((g,v,m=!0)=>{const[_]=p(g);if(!_)return!1;const C=On(_,v);return m&&C>0||C>=_.width*_.height},[]);return b.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:y}),[e,n,r,o,i,s,a,c,u,l,f,h,y])}const yf={actInsideInputWithModifier:!1};var xf=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=oe(),{deleteElements:r}=mn(),o=Rt(e,yf),i=Rt(t);b.useEffect(()=>{if(o){const{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function wf(e){const t=oe();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!e.current)return;const o=er(e.current);(o.height===0||o.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",Ie.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const cr={position:"absolute",width:"100%",height:"100%",top:0,left:0},vf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,jt=e=>({x:e.x,y:e.y,zoom:e.k}),it=(e,t)=>e.target.closest(`.${t}`),Xr=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),jr=e=>{const t=e.ctrlKey&&rn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},bf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Sf=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ue.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:f=!0,defaultViewport:p,translateExtent:h,minZoom:y,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:m=!0,children:_,noWheelClassName:C,noPanClassName:x})=>{const N=b.useRef(),$=oe(),D=b.useRef(!1),V=b.useRef(!1),A=b.useRef(null),O=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:F,d3ZoomHandler:L,userSelectionActive:d}=ee(bf,de),E=Rt(v),w=b.useRef(0),T=b.useRef(!1),I=b.useRef();return wf(A),b.useEffect(()=>{if(A.current){const S=A.current.getBoundingClientRect(),M=Ho().scaleExtent([y,g]).translateExtent(h),R=ge(A.current).call(M),H=Ae.translate(p.x,p.y).scale(pt(p.zoom,y,g)),B=[[0,0],[S.width,S.height]],W=M.constrain()(H,B,h);M.transform(R,W),M.wheelDelta(jr),$.setState({d3Zoom:M,d3Selection:R,d3ZoomHandler:R.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:A.current.closest(".react-flow")})}},[]),b.useEffect(()=>{F&&P&&(s&&!E&&!d?F.on("wheel.zoom",S=>{if(it(S,C))return!1;S.preventDefault(),S.stopImmediatePropagation();const M=F.property("__zoom").k||1;if(S.ctrlKey&&i){const J=ve(S),K=jr(S),q=M*Math.pow(2,K);P.scaleTo(F,q,J,S);return}const R=S.deltaMode===1?20:1;let H=c===Ue.Vertical?0:S.deltaX*R,B=c===Ue.Horizontal?0:S.deltaY*R;!rn()&&S.shiftKey&&c!==Ue.Vertical&&(H=S.deltaY*R,B=0),P.translateBy(F,-(H/M)*a,-(B/M)*a,{internal:!0});const W=jt(F.property("__zoom")),{onViewportChangeStart:j,onViewportChange:U,onViewportChangeEnd:Z}=$.getState();clearTimeout(I.current),T.current||(T.current=!0,t==null||t(S,W),j==null||j(W)),T.current&&(e==null||e(S,W),U==null||U(W),I.current=setTimeout(()=>{n==null||n(S,W),Z==null||Z(W),T.current=!1},150))},{passive:!1}):typeof L<"u"&&F.on("wheel.zoom",function(S,M){if(!m&&S.type==="wheel"&&!S.ctrlKey||it(S,C))return null;S.preventDefault(),L.call(this,S,M)},{passive:!1}))},[d,s,c,F,P,L,E,i,m,C,t,e,n]),b.useEffect(()=>{P&&P.on("start",S=>{var H,B;if(!S.sourceEvent||S.sourceEvent.internal)return null;w.current=(H=S.sourceEvent)==null?void 0:H.button;const{onViewportChangeStart:M}=$.getState(),R=jt(S.transform);D.current=!0,O.current=R,((B=S.sourceEvent)==null?void 0:B.type)==="mousedown"&&$.setState({paneDragging:!0}),M==null||M(R),t==null||t(S.sourceEvent,R)})},[P,t]),b.useEffect(()=>{P&&(d&&!D.current?P.on("zoom",null):d||P.on("zoom",S=>{var R;const{onViewportChange:M}=$.getState();if($.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),V.current=!!(r&&Xr(f,w.current??0)),(e||M)&&!((R=S.sourceEvent)!=null&&R.internal)){const H=jt(S.transform);M==null||M(H),e==null||e(S.sourceEvent,H)}}))},[d,P,e,f,r]),b.useEffect(()=>{P&&P.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:M}=$.getState();if(D.current=!1,$.setState({paneDragging:!1}),r&&Xr(f,w.current??0)&&!V.current&&r(S.sourceEvent),V.current=!1,(n||M)&&vf(O.current,S.transform)){const R=jt(S.transform);O.current=R,clearTimeout(N.current),N.current=setTimeout(()=>{M==null||M(R),n==null||n(S.sourceEvent,R)},s?150:0)}})},[P,s,f,n,r]),b.useEffect(()=>{P&&P.filter(S=>{const M=E||o,R=i&&S.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&S.button===1&&S.type==="mousedown"&&(it(S,"react-flow__node")||it(S,"react-flow__edge")))return!0;if(!f&&!M&&!s&&!u&&!i||d||!u&&S.type==="dblclick"||it(S,C)&&S.type==="wheel"||it(S,x)&&(S.type!=="wheel"||s&&S.type==="wheel"&&!E)||!i&&S.ctrlKey&&S.type==="wheel"||!M&&!s&&!R&&S.type==="wheel"||!f&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(f)&&!f.includes(S.button)&&S.type==="mousedown")return!1;const H=Array.isArray(f)&&f.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&H})},[d,P,o,i,s,u,f,l,E]),k.createElement("div",{className:"react-flow__renderer",ref:A,style:cr},_)},_f=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ef(){const{userSelectionActive:e,userSelectionRect:t}=ee(_f,de);return e&&t?k.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Ur(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(o>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function pi(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const i=e.filter(a=>a.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const a of i)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&Ur(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&Ur(r,s);break}case"remove":return r}return r.push(s),r},n)}function gi(e,t){return pi(e,t)}function Nf(e,t){return pi(e,t)}const He=(e,t)=>({id:e,type:"select",selected:t});function at(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(He(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(He(r.id,!1))),n},[])}const Cn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},kf=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),mi=b.memo(({isSelecting:e,selectionMode:t=It.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:f})=>{const p=b.useRef(null),h=oe(),y=b.useRef(0),g=b.useRef(0),v=b.useRef(),{userSelectionActive:m,elementsSelectable:_,dragging:C}=ee(kf,de),x=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,g.current=0},N=L=>{i==null||i(L),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},$=L=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){L.preventDefault();return}s==null||s(L)},D=a?L=>a(L):void 0,V=L=>{const{resetSelectedElements:d,domNode:E}=h.getState();if(v.current=E==null?void 0:E.getBoundingClientRect(),!_||!e||L.button!==0||L.target!==p.current||!v.current)return;const{x:w,y:T}=Le(L,v.current);d(),h.setState({userSelectionRect:{width:0,height:0,startX:w,startY:T,x:w,y:T}}),r==null||r(L)},A=L=>{const{userSelectionRect:d,nodeInternals:E,edges:w,transform:T,onNodesChange:I,onEdgesChange:S,nodeOrigin:M,getNodes:R}=h.getState();if(!e||!v.current||!d)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=Le(L,v.current),B=d.startX??0,W=d.startY??0,j={...d,x:H.x<B?H.x:B,y:H.y<W?H.y:W,width:Math.abs(H.x-B),height:Math.abs(H.y-W)},U=R(),Z=qo(E,j,T,t===It.Partial,!0,M),J=Ko(Z,w).map(q=>q.id),K=Z.map(q=>q.id);if(y.current!==K.length){y.current=K.length;const q=at(U,K);q.length&&(I==null||I(q))}if(g.current!==J.length){g.current=J.length;const q=at(w,J);q.length&&(S==null||S(q))}h.setState({userSelectionRect:j})},O=L=>{if(L.button!==0)return;const{userSelectionRect:d}=h.getState();!m&&d&&L.target===p.current&&(N==null||N(L)),h.setState({nodesSelectionActive:y.current>0}),x(),o==null||o(L)},P=L=>{m&&(h.setState({nodesSelectionActive:y.current>0}),o==null||o(L)),x()},F=_&&(e||m);return k.createElement("div",{className:se(["react-flow__pane",{dragging:C,selection:e}]),onClick:F?void 0:Cn(N,p),onContextMenu:Cn($,p),onWheel:Cn(D,p),onMouseEnter:F?void 0:c,onMouseDown:F?V:void 0,onMouseMove:F?A:u,onMouseUp:F?O:void 0,onMouseLeave:F?P:l,ref:p,style:cr},f,k.createElement(Ef,null))});mi.displayName="Pane";function yi(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:yi(r,t):!1}function Gr(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Cf(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!yi(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function Mf(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function xi(e,t,n,r,o=[0,0],i){const s=Mf(e,e.extent||r);let a=s;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:p,y:h}=Ze(f,o).positionAbsolute;a=f&&me(p)&&me(h)&&me(f.width)&&me(f.height)?[[p+e.width*o[0],h+e.height*o[1]],[p+f.width-e.width+e.width*o[0],h+f.height-e.height+e.height*o[1]]]:a}else i==null||i("005",Ie.error005()),a=s;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:p,y:h}=Ze(f,o).positionAbsolute;a=[[e.extent[0][0]+p,e.extent[0][1]+h],[e.extent[1][0]+p,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=Ze(f,o).positionAbsolute}const l=a&&a!=="parent"?tr(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function Mn({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Zr=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...er(c)}})};function St(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Xn({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Ie.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):o([e])}function $f(){const e=oe();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(c.x/o[0]):c.x,ySnapped:i?o[1]*Math.round(c.y/o[1]):c.y,...c}},[])}function $n(e){return(t,n,r)=>e==null?void 0:e(t,r)}function wi({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const a=oe(),[c,u]=b.useState(!1),l=b.useRef([]),f=b.useRef({x:null,y:null}),p=b.useRef(0),h=b.useRef(null),y=b.useRef({x:0,y:0}),g=b.useRef(null),v=b.useRef(!1),m=b.useRef(!1),_=b.useRef(!1),C=$f();return b.useEffect(()=>{if(e!=null&&e.current){const x=ge(e.current),N=({x:V,y:A})=>{const{nodeInternals:O,onNodeDrag:P,onSelectionDrag:F,updateNodePositions:L,nodeExtent:d,snapGrid:E,snapToGrid:w,nodeOrigin:T,onError:I}=a.getState();f.current={x:V,y:A};let S=!1,M={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&d){const H=gn(l.current,T);M=zt(H)}if(l.current=l.current.map(H=>{const B={x:V-H.distance.x,y:A-H.distance.y};w&&(B.x=E[0]*Math.round(B.x/E[0]),B.y=E[1]*Math.round(B.y/E[1]));const W=[[d[0][0],d[0][1]],[d[1][0],d[1][1]]];l.current.length>1&&d&&!H.extent&&(W[0][0]=H.positionAbsolute.x-M.x+d[0][0],W[1][0]=H.positionAbsolute.x+(H.width??0)-M.x2+d[1][0],W[0][1]=H.positionAbsolute.y-M.y+d[0][1],W[1][1]=H.positionAbsolute.y+(H.height??0)-M.y2+d[1][1]);const j=xi(H,B,O,W,T,I);return S=S||H.position.x!==j.position.x||H.position.y!==j.position.y,H.position=j.position,H.positionAbsolute=j.positionAbsolute,H}),!S)return;L(l.current,!0,!0),u(!0);const R=o?P:$n(F);if(R&&g.current){const[H,B]=Mn({nodeId:o,dragItems:l.current,nodeInternals:O});R(g.current,H,B)}},$=()=>{if(!h.current)return;const[V,A]=Lo(y.current,h.current);if(V!==0||A!==0){const{transform:O,panBy:P}=a.getState();f.current.x=(f.current.x??0)-V/O[2],f.current.y=(f.current.y??0)-A/O[2],P({x:V,y:A})&&N(f.current)}p.current=requestAnimationFrame($)},D=V=>{var T;const{nodeInternals:A,multiSelectionActive:O,nodesDraggable:P,unselectNodesAndEdges:F,onNodeDragStart:L,onSelectionDragStart:d}=a.getState();m.current=!0;const E=o?L:$n(d);(!s||!i)&&!O&&o&&((T=A.get(o))!=null&&T.selected||F()),o&&i&&s&&Xn({id:o,store:a,nodeRef:e});const w=C(V);if(f.current=w,l.current=Cf(A,P,w,o),E&&l.current){const[I,S]=Mn({nodeId:o,dragItems:l.current,nodeInternals:A});E(V.sourceEvent,I,S)}};if(t)x.on(".drag",null);else{const V=Vc().on("start",A=>{const{domNode:O,nodeDragThreshold:P}=a.getState();P===0&&D(A),_.current=!1;const F=C(A);f.current=F,h.current=(O==null?void 0:O.getBoundingClientRect())||null,y.current=Le(A.sourceEvent,h.current)}).on("drag",A=>{var L,d;const O=C(A),{autoPanOnNodeDrag:P,nodeDragThreshold:F}=a.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(_.current=!0),!_.current){if(!v.current&&m.current&&P&&(v.current=!0,$()),!m.current){const E=O.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),w=O.ySnapped-(((d=f==null?void 0:f.current)==null?void 0:d.y)??0);Math.sqrt(E*E+w*w)>F&&D(A)}(f.current.x!==O.xSnapped||f.current.y!==O.ySnapped)&&l.current&&m.current&&(g.current=A.sourceEvent,y.current=Le(A.sourceEvent,h.current),N(O))}}).on("end",A=>{if(!(!m.current||_.current)&&(u(!1),v.current=!1,m.current=!1,cancelAnimationFrame(p.current),l.current)){const{updateNodePositions:O,nodeInternals:P,onNodeDragStop:F,onSelectionDragStop:L}=a.getState(),d=o?F:$n(L);if(O(l.current,!1,!1),d){const[E,w]=Mn({nodeId:o,dragItems:l.current,nodeInternals:P});d(A.sourceEvent,E,w)}}}).filter(A=>{const O=A.target;return!A.button&&(!n||!Gr(O,`.${n}`,e))&&(!r||Gr(O,r,e))});return x.call(V),()=>{x.on(".drag",null)}}}},[e,t,n,r,i,a,o,s,C]),c}function vi(){const e=oe();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),f=s().filter(_=>_.selected&&(_.draggable||l&&typeof _.draggable>"u")),p=a?c[0]:5,h=a?c[1]:5,y=n.isShiftPressed?4:1,g=n.x*p*y,v=n.y*h*y,m=f.map(_=>{if(_.positionAbsolute){const C={x:_.positionAbsolute.x+g,y:_.positionAbsolute.y+v};a&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));const{positionAbsolute:x,position:N}=xi(_,C,r,o,void 0,u);_.position=N,_.positionAbsolute=x}return _});i(m,!0,!1)},[])}const ut={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _t=e=>{const t=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:f,onMouseMove:p,onMouseLeave:h,onContextMenu:y,onDoubleClick:g,style:v,className:m,isDraggable:_,isSelectable:C,isConnectable:x,isFocusable:N,selectNodesOnDrag:$,sourcePosition:D,targetPosition:V,hidden:A,resizeObserver:O,dragHandle:P,zIndex:F,isParent:L,noDragClassName:d,noPanClassName:E,initialized:w,disableKeyboardA11y:T,ariaLabel:I,rfId:S,hasHandleBounds:M})=>{const R=oe(),H=b.useRef(null),B=b.useRef(null),W=b.useRef(D),j=b.useRef(V),U=b.useRef(r),Z=C||_||l||f||p||h,J=vi(),K=St(n,R.getState,f),q=St(n,R.getState,p),ie=St(n,R.getState,h),re=St(n,R.getState,y),le=St(n,R.getState,g),ae=Q=>{const{nodeDragThreshold:X}=R.getState();if(C&&(!$||!_||X>0)&&Xn({id:n,store:R,nodeRef:H}),l){const ue=R.getState().nodeInternals.get(n);ue&&l(Q,{...ue})}},ne=Q=>{if(!Vn(Q)&&!T)if(Wo.includes(Q.key)&&C){const X=Q.key==="Escape";Xn({id:n,store:R,unselect:X,nodeRef:H})}else _&&u&&Object.prototype.hasOwnProperty.call(ut,Q.key)&&(R.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),J({x:ut[Q.key].x,y:ut[Q.key].y,isShiftPressed:Q.shiftKey}))};b.useEffect(()=>()=>{B.current&&(O==null||O.unobserve(B.current),B.current=null)},[]),b.useEffect(()=>{if(H.current&&!A){const Q=H.current;(!w||!M||B.current!==Q)&&(B.current&&(O==null||O.unobserve(B.current)),O==null||O.observe(Q),B.current=Q)}},[A,w,M]),b.useEffect(()=>{const Q=U.current!==r,X=W.current!==D,ue=j.current!==V;H.current&&(Q||X||ue)&&(Q&&(U.current=r),X&&(W.current=D),ue&&(j.current=V),R.getState().updateNodeDimensions([{id:n,nodeElement:H.current,forceUpdate:!0}]))},[n,r,D,V]);const he=wi({nodeRef:H,disabled:A||!_,noDragClassName:d,handleSelector:P,nodeId:n,isSelectable:C,selectNodesOnDrag:$});return A?null:k.createElement("div",{className:se(["react-flow__node",`react-flow__node-${r}`,{[E]:_},m,{selected:u,selectable:C,parent:L,dragging:he}]),ref:H,style:{zIndex:F,transform:`translate(${a}px,${c}px)`,pointerEvents:Z?"all":"none",visibility:w?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:K,onMouseMove:q,onMouseLeave:ie,onContextMenu:re,onClick:ae,onDoubleClick:le,onKeyDown:N?ne:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":T?void 0:`${li}-${S}`,"aria-label":I},k.createElement(Bu,{value:n},k.createElement(e,{id:n,data:o,type:r,xPos:i,yPos:s,selected:u,isConnectable:x,sourcePosition:D,targetPosition:V,dragging:he,dragHandle:P,zIndex:F})))};return t.displayName="NodeWrapper",b.memo(t)};const Tf=e=>{const t=e.getNodes().filter(n=>n.selected);return{...gn(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Af({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=oe(),{width:o,height:i,x:s,y:a,transformString:c,userSelectionActive:u}=ee(Tf,de),l=vi(),f=b.useRef(null);if(b.useEffect(()=>{var y;n||(y=f.current)==null||y.focus({preventScroll:!0})},[n]),wi({nodeRef:f}),u||!o||!i)return null;const p=e?y=>{const g=r.getState().getNodes().filter(v=>v.selected);e(y,g)}:void 0,h=y=>{Object.prototype.hasOwnProperty.call(ut,y.key)&&l({x:ut[y.key].x,y:ut[y.key].y,isShiftPressed:y.shiftKey})};return k.createElement("div",{className:se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},k.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:i,top:a,left:s}}))}var zf=b.memo(Af);const If=e=>e.nodesSelectionActive,bi=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:y,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:m,zoomActivationKeyCode:_,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:N,panOnScroll:$,panOnScrollSpeed:D,panOnScrollMode:V,zoomOnDoubleClick:A,panOnDrag:O,defaultViewport:P,translateExtent:F,minZoom:L,maxZoom:d,preventScrolling:E,onSelectionContextMenu:w,noWheelClassName:T,noPanClassName:I,disableKeyboardA11y:S})=>{const M=ee(If),R=Rt(f),H=Rt(m),B=H||O,W=H||$,j=R||p&&B!==!0;return xf({deleteKeyCode:a,multiSelectionKeyCode:v}),k.createElement(Sf,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:N,panOnScroll:W,panOnScrollSpeed:D,panOnScrollMode:V,zoomOnDoubleClick:A,panOnDrag:!R&&B,defaultViewport:P,translateExtent:F,minZoom:L,maxZoom:d,zoomActivationKeyCode:_,preventScrolling:E,noWheelClassName:T,noPanClassName:I},k.createElement(mi,{onSelectionStart:y,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:B,isSelecting:!!j,selectionMode:h},e,M&&k.createElement(zf,{onSelectionContextMenu:w,noPanClassName:I,disableKeyboardA11y:S})))};bi.displayName="FlowRenderer";var Rf=b.memo(bi);function Df(e){return ee(b.useCallback(n=>e?qo(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Hf(e){const t={input:_t(e.input||ii),default:_t(e.default||Yn),output:_t(e.output||ai),group:_t(e.group||ar)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=_t(e[i]||Yn),o),n);return{...t,...r}}const Pf=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},Lf=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Si=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=ee(Lf,de),a=Df(e.onlyRenderVisibleElements),c=b.useRef(),u=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(f=>{const p=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(p)});return c.current=l,l},[]);return b.useEffect(()=>()=>{var l;(l=c==null?void 0:c.current)==null||l.disconnect()},[]),k.createElement("div",{className:"react-flow__nodes",style:cr},a.map(l=>{var N,$,D;let f=l.type||"default";e.nodeTypes[f]||(s==null||s("003",Ie.error003(f)),f="default");const p=e.nodeTypes[f]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),y=!!(l.selectable||o&&typeof l.selectable>"u"),g=!!(l.connectable||n&&typeof l.connectable>"u"),v=!!(l.focusable||r&&typeof l.focusable>"u"),m=e.nodeExtent?tr(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,_=(m==null?void 0:m.x)??0,C=(m==null?void 0:m.y)??0,x=Pf({x:_,y:C,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return k.createElement(p,{key:l.id,id:l.id,className:l.className,style:l.style,type:f,data:l.data,sourcePosition:l.sourcePosition||Y.Bottom,targetPosition:l.targetPosition||Y.Top,hidden:l.hidden,xPos:_,yPos:C,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:y,isConnectable:g,isFocusable:v,resizeObserver:u,dragHandle:l.dragHandle,zIndex:((N=l[te])==null?void 0:N.z)??0,isParent:!!(($=l[te])!=null&&$.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!((D=l[te])!=null&&D.handleBounds)})}))};Si.displayName="NodeRenderer";var Of=b.memo(Si);const Vf=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Ff=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,qr="react-flow__edgeupdater",Kr=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a})=>k.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:se([qr,`${qr}-${a}`]),cx:Vf(t,r,e),cy:Ff(n,r,e),r,stroke:"transparent",fill:"transparent"}),Wf=()=>!0;var st=e=>{const t=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:g,style:v,source:m,target:_,sourceX:C,sourceY:x,targetX:N,targetY:$,sourcePosition:D,targetPosition:V,elementsSelectable:A,hidden:O,sourceHandleId:P,targetHandleId:F,onContextMenu:L,onMouseEnter:d,onMouseMove:E,onMouseLeave:w,reconnectRadius:T,onReconnect:I,onReconnectStart:S,onReconnectEnd:M,markerEnd:R,markerStart:H,rfId:B,ariaLabel:W,isFocusable:j,isReconnectable:U,pathOptions:Z,interactionWidth:J,disableKeyboardA11y:K})=>{const q=b.useRef(null),[ie,re]=b.useState(!1),[le,ae]=b.useState(!1),ne=oe(),he=b.useMemo(()=>`url('#${Wn(H,B)}')`,[H,B]),Q=b.useMemo(()=>`url('#${Wn(R,B)}')`,[R,B]);if(O)return null;const X=ce=>{var _e;const{edges:we,addSelectedEdges:Fe,unselectNodesAndEdges:We,multiSelectionActive:Be}=ne.getState(),Me=we.find(yt=>yt.id===n);Me&&(A&&(ne.setState({nodesSelectionActive:!1}),Me.selected&&Be?(We({nodes:[],edges:[Me]}),(_e=q.current)==null||_e.blur()):Fe([n])),s&&s(ce,Me))},ue=bt(n,ne.getState,a),ke=bt(n,ne.getState,L),gt=bt(n,ne.getState,d),Je=bt(n,ne.getState,E),Qe=bt(n,ne.getState,w),Ce=(ce,we)=>{if(ce.button!==0)return;const{edges:Fe,isValidConnection:We}=ne.getState(),Be=we?_:m,Me=(we?F:P)||null,_e=we?"target":"source",yt=We||Wf,yn=we,xt=Fe.find(Ye=>Ye.id===n);ae(!0),S==null||S(ce,xt,_e);const xn=Ye=>{ae(!1),M==null||M(Ye,xt,_e)};ti({event:ce,handleId:Me,nodeId:Be,onConnect:Ye=>I==null?void 0:I(xt,Ye),isTarget:yn,getState:ne.getState,setState:ne.setState,isValidConnection:yt,edgeUpdaterType:_e,onReconnectEnd:xn})},et=ce=>Ce(ce,!0),Oe=ce=>Ce(ce,!1),Ve=()=>re(!0),tt=()=>re(!1),nt=!A&&!s,mt=ce=>{var we;if(!K&&Wo.includes(ce.key)&&A){const{unselectNodesAndEdges:Fe,addSelectedEdges:We,edges:Be}=ne.getState();ce.key==="Escape"?((we=q.current)==null||we.blur(),Fe({edges:[Be.find(_e=>_e.id===n)]})):We([n])}};return k.createElement("g",{className:se(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:u,inactive:nt,updating:ie}]),onClick:X,onDoubleClick:ue,onContextMenu:ke,onMouseEnter:gt,onMouseMove:Je,onMouseLeave:Qe,onKeyDown:j?mt:void 0,tabIndex:j?0:void 0,role:j?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${m} to ${_}`,"aria-describedby":j?`${ui}-${B}`:void 0,ref:q},!le&&k.createElement(e,{id:n,source:m,target:_,selected:c,animated:u,label:l,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:g,data:i,style:v,sourceX:C,sourceY:x,targetX:N,targetY:$,sourcePosition:D,targetPosition:V,sourceHandleId:P,targetHandleId:F,markerStart:he,markerEnd:Q,pathOptions:Z,interactionWidth:J}),U&&k.createElement(k.Fragment,null,(U==="source"||U===!0)&&k.createElement(Kr,{position:D,centerX:C,centerY:x,radius:T,onMouseDown:et,onMouseEnter:Ve,onMouseOut:tt,type:"source"}),(U==="target"||U===!0)&&k.createElement(Kr,{position:V,centerX:N,centerY:$,radius:T,onMouseDown:Oe,onMouseEnter:Ve,onMouseOut:tt,type:"target"})))};return t.displayName="EdgeWrapper",b.memo(t)};function Bf(e){const t={default:st(e.default||sn),straight:st(e.bezier||or),step:st(e.step||rr),smoothstep:st(e.step||pn),simplebezier:st(e.simplebezier||nr)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=st(e[i]||sn),o),n);return{...t,...r}}function Jr(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+i/2,y:o};case Y.Right:return{x:r+i,y:o+s/2};case Y.Bottom:return{x:r+i/2,y:o+s};case Y.Left:return{x:r,y:o+s/2}}}function Qr(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Yf=(e,t,n,r,o,i)=>{const s=Jr(n,e,t),a=Jr(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Xf({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=zt({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),f=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),p=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(f*p)>0}function eo(e){var r,o,i,s,a;const t=((r=e==null?void 0:e[te])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const jf=[{level:0,isMaxLevel:!0,edges:[]}];function Uf(e,t,n=!1){let r=-1;const o=e.reduce((s,a)=>{var l,f;const c=me(a.zIndex);let u=c?a.zIndex:0;if(n){const p=t.get(a.target),h=t.get(a.source),y=a.selected||(p==null?void 0:p.selected)||(h==null?void 0:h.selected),g=Math.max(((l=h==null?void 0:h[te])==null?void 0:l.z)||0,((f=p==null?void 0:p[te])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(y?g:0)}return s[u]?s[u].push(a):s[u]=[a],r=u>r?u:r,s},{}),i=Object.entries(o).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===r}});return i.length===0?jf:i}function Gf(e,t,n){const r=ee(b.useCallback(o=>e?o.edges.filter(i=>{const s=t.get(i.source),a=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Xf({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return Uf(r,t,n)}const Zf=({color:e="none",strokeWidth:t=1})=>k.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),qf=({color:e="none",strokeWidth:t=1})=>k.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),to={[on.Arrow]:Zf,[on.ArrowClosed]:qf};function Kf(e){const t=oe();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(to,e)?to[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Ie.error009(e)),null)},[e])}const Jf=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Kf(t);return c?k.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},k.createElement(c,{color:n,strokeWidth:s})):null},Qf=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=Wn(s,t);r.includes(a)||(o.push({id:a,color:s.color||e,...s}),r.push(a))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},_i=({defaultColor:e,rfId:t})=>{const n=ee(b.useCallback(Qf({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return k.createElement("defs",null,n.map(r=>k.createElement(Jf,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};_i.displayName="MarkerDefinitions";var ed=b.memo(_i);const td=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ei=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:y,reconnectRadius:g,children:v,disableKeyboardA11y:m})=>{const{edgesFocusable:_,edgesUpdatable:C,elementsSelectable:x,width:N,height:$,connectionMode:D,nodeInternals:V,onError:A}=ee(td,de),O=Gf(t,V,n);return N?k.createElement(k.Fragment,null,O.map(({level:P,edges:F,isMaxLevel:L})=>k.createElement("svg",{key:P,style:{zIndex:P},width:N,height:$,className:"react-flow__edges react-flow__container"},L&&k.createElement(ed,{defaultColor:e,rfId:r}),k.createElement("g",null,F.map(d=>{const[E,w,T]=eo(V.get(d.source)),[I,S,M]=eo(V.get(d.target));if(!T||!M)return null;let R=d.type||"default";o[R]||(A==null||A("011",Ie.error011(R)),R="default");const H=o[R]||o.default,B=D===Ke.Strict?S.target:(S.target??[]).concat(S.source??[]),W=Qr(w.source,d.sourceHandle),j=Qr(B,d.targetHandle),U=(W==null?void 0:W.position)||Y.Bottom,Z=(j==null?void 0:j.position)||Y.Top,J=!!(d.focusable||_&&typeof d.focusable>"u"),K=d.reconnectable||d.updatable,q=typeof p<"u"&&(K||C&&typeof K>"u");if(!W||!j)return A==null||A("008",Ie.error008(W,d)),null;const{sourceX:ie,sourceY:re,targetX:le,targetY:ae}=Yf(E,W,U,I,j,Z);return k.createElement(H,{key:d.id,id:d.id,className:se([d.className,i]),type:R,data:d.data,selected:!!d.selected,animated:!!d.animated,hidden:!!d.hidden,label:d.label,labelStyle:d.labelStyle,labelShowBg:d.labelShowBg,labelBgStyle:d.labelBgStyle,labelBgPadding:d.labelBgPadding,labelBgBorderRadius:d.labelBgBorderRadius,style:d.style,source:d.source,target:d.target,sourceHandleId:d.sourceHandle,targetHandleId:d.targetHandle,markerEnd:d.markerEnd,markerStart:d.markerStart,sourceX:ie,sourceY:re,targetX:le,targetY:ae,sourcePosition:U,targetPosition:Z,elementsSelectable:x,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:y,reconnectRadius:g,rfId:r,ariaLabel:d.ariaLabel,isFocusable:J,isReconnectable:q,pathOptions:"pathOptions"in d?d.pathOptions:void 0,interactionWidth:d.interactionWidth,disableKeyboardA11y:m})})))),v):null};Ei.displayName="EdgeRenderer";var nd=b.memo(Ei);const rd=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function od({children:e}){const t=ee(rd);return k.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function id(e){const t=mn(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const sd={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Ni=({nodeId:e,handleType:t,style:n,type:r=Pe.Bezier,CustomComponent:o,connectionStatus:i})=>{var $,D,V;const{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=ee(b.useCallback(A=>({fromNode:A.nodeInternals.get(e),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[e]),de),f=($=s==null?void 0:s[te])==null?void 0:$.handleBounds;let p=f==null?void 0:f[t];if(l===Ke.Loose&&(p=p||(f==null?void 0:f[t==="source"?"target":"source"])),!s||!p)return null;const h=a?p.find(A=>A.id===a):p[0],y=h?h.x+h.width/2:(s.width??0)/2,g=h?h.y+h.height/2:s.height??0,v=(((D=s.positionAbsolute)==null?void 0:D.x)??0)+y,m=(((V=s.positionAbsolute)==null?void 0:V.y)??0)+g,_=h==null?void 0:h.position,C=_?sd[_]:null;if(!_||!C)return null;if(o)return k.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:v,fromY:m,toX:c,toY:u,fromPosition:_,toPosition:C,connectionStatus:i});let x="";const N={sourceX:v,sourceY:m,sourcePosition:_,targetX:c,targetY:u,targetPosition:C};return r===Pe.Bezier?[x]=Uo(N):r===Pe.Step?[x]=Fn({...N,borderRadius:0}):r===Pe.SmoothStep?[x]=Fn(N):r===Pe.SimpleBezier?[x]=jo(N):x=`M${v},${m} ${c},${u}`,k.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};Ni.displayName="ConnectionLine";const ad=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function cd({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:a,height:c,connectionStatus:u}=ee(ad,de);return!(o&&i&&a&&s)?null:k.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},k.createElement("g",{className:se(["react-flow__connection",u])},k.createElement(Ni,{nodeId:o,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function no(e,t){return b.useRef(null),oe(),b.useMemo(()=>t(e),[e])}const ki=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,onSelectionContextMenu:y,onSelectionStart:g,onSelectionEnd:v,connectionLineType:m,connectionLineStyle:_,connectionLineComponent:C,connectionLineContainerStyle:x,selectionKeyCode:N,selectionOnDrag:$,selectionMode:D,multiSelectionKeyCode:V,panActivationKeyCode:A,zoomActivationKeyCode:O,deleteKeyCode:P,onlyRenderVisibleElements:F,elementsSelectable:L,selectNodesOnDrag:d,defaultViewport:E,translateExtent:w,minZoom:T,maxZoom:I,preventScrolling:S,defaultMarkerColor:M,zoomOnScroll:R,zoomOnPinch:H,panOnScroll:B,panOnScrollSpeed:W,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:Z,onPaneClick:J,onPaneMouseEnter:K,onPaneMouseMove:q,onPaneMouseLeave:ie,onPaneScroll:re,onPaneContextMenu:le,onEdgeContextMenu:ae,onEdgeMouseEnter:ne,onEdgeMouseMove:he,onEdgeMouseLeave:Q,onReconnect:X,onReconnectStart:ue,onReconnectEnd:ke,reconnectRadius:gt,noDragClassName:Je,noWheelClassName:Qe,noPanClassName:Ce,elevateEdgesOnSelect:et,disableKeyboardA11y:Oe,nodeOrigin:Ve,nodeExtent:tt,rfId:nt})=>{const mt=no(e,Hf),ce=no(t,Bf);return id(i),k.createElement(Rf,{onPaneClick:J,onPaneMouseEnter:K,onPaneMouseMove:q,onPaneMouseLeave:ie,onPaneContextMenu:le,onPaneScroll:re,deleteKeyCode:P,selectionKeyCode:N,selectionOnDrag:$,selectionMode:D,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:V,panActivationKeyCode:A,zoomActivationKeyCode:O,elementsSelectable:L,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:R,zoomOnPinch:H,zoomOnDoubleClick:U,panOnScroll:B,panOnScrollSpeed:W,panOnScrollMode:j,panOnDrag:Z,defaultViewport:E,translateExtent:w,minZoom:T,maxZoom:I,onSelectionContextMenu:y,preventScrolling:S,noDragClassName:Je,noWheelClassName:Qe,noPanClassName:Ce,disableKeyboardA11y:Oe},k.createElement(od,null,k.createElement(nd,{edgeTypes:ce,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:F,onEdgeContextMenu:ae,onEdgeMouseEnter:ne,onEdgeMouseMove:he,onEdgeMouseLeave:Q,onReconnect:X,onReconnectStart:ue,onReconnectEnd:ke,reconnectRadius:gt,defaultMarkerColor:M,noPanClassName:Ce,elevateEdgesOnSelect:!!et,disableKeyboardA11y:Oe,rfId:nt},k.createElement(cd,{style:_,type:m,component:C,containerStyle:x})),k.createElement("div",{className:"react-flow__edgelabel-renderer"}),k.createElement(Of,{nodeTypes:mt,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,selectNodesOnDrag:d,onlyRenderVisibleElements:F,noPanClassName:Ce,noDragClassName:Je,disableKeyboardA11y:Oe,nodeOrigin:Ve,nodeExtent:tt,rfId:nt})))};ki.displayName="GraphView";var ld=b.memo(ki);const jn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Re={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:jn,nodeExtent:jn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ke.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Pu,isValidConnection:void 0},ud=()=>Js((e,t)=>({...Re,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:kn(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?kn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c==null?void 0:c.querySelector(".react-flow__viewport");if(!l)return;const f=window.getComputedStyle(l),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((g,v)=>{const m=o.get(v.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[te]:{...m[te],handleBounds:void 0}});else if(m){const _=er(v.nodeElement);!!(_.width&&_.height&&(m.width!==_.width||m.height!==_.height||v.forceUpdate))&&(o.set(m.id,{...m,[te]:{...m[te],handleBounds:{source:Zr(".source",v.nodeElement,p,u),target:Zr(".target",v.nodeElement,p,u)}},..._}),g.push({id:m.id,type:"dimensions",dimensions:_}))}return g},[]);di(o,u);const y=s||i&&!s&&hi(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:y}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:o};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(i){const u=gi(n,a()),l=kn(u,o,s,c);e({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,a=null;r?s=n.map(c=>He(c,!0)):(s=at(i(),n),a=at(o,[])),Xt({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,a=null;r?s=n.map(c=>He(c,!0)):(s=at(o,n),a=at(i(),[])),Xt({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=t(),s=n||i(),a=r||o,c=s.map(l=>(l.selected=!1,He(l.id,!1))),u=a.map(l=>He(l.id,!1));Xt({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(a=>a.selected).map(a=>He(a.id,!1)),s=n.filter(a=>a.selected).map(a=>He(a.id,!1));Xt({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=tr(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:a,translateExtent:c}=t();if(!s||!a||!n.x&&!n.y)return!1;const u=Ae.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[o,i]],f=s==null?void 0:s.constrain()(u,l,c);return s.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Re.connectionNodeId,connectionHandleId:Re.connectionHandleId,connectionHandleType:Re.connectionHandleType,connectionStatus:Re.connectionStatus,connectionStartHandle:Re.connectionStartHandle,connectionEndHandle:Re.connectionEndHandle}),reset:()=>e({...Re})}),Object.is),lr=({children:e})=>{const t=b.useRef(null);return t.current||(t.current=ud()),k.createElement(Tu,{value:t.current},e)};lr.displayName="ReactFlowProvider";const Ci=({children:e})=>b.useContext(hn)?k.createElement(k.Fragment,null,e):k.createElement(lr,null,e);Ci.displayName="ReactFlowWrapper";const fd={input:ii,default:Yn,output:ai,group:ar},dd={default:sn,straight:or,step:rr,smoothstep:pn,simplebezier:nr},hd=[0,0],pd=[15,15],gd={x:0,y:0,zoom:1},md={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Mi=b.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=fd,edgeTypes:s=dd,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:f,onMoveEnd:p,onConnect:h,onConnectStart:y,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:N,onNodeDoubleClick:$,onNodeDragStart:D,onNodeDrag:V,onNodeDragStop:A,onNodesDelete:O,onEdgesDelete:P,onSelectionChange:F,onSelectionDragStart:L,onSelectionDrag:d,onSelectionDragStop:E,onSelectionContextMenu:w,onSelectionStart:T,onSelectionEnd:I,connectionMode:S=Ke.Strict,connectionLineType:M=Pe.Bezier,connectionLineStyle:R,connectionLineComponent:H,connectionLineContainerStyle:B,deleteKeyCode:W="Backspace",selectionKeyCode:j="Shift",selectionOnDrag:U=!1,selectionMode:Z=It.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:K=rn()?"Meta":"Control",zoomActivationKeyCode:q=rn()?"Meta":"Control",snapToGrid:ie=!1,snapGrid:re=pd,onlyRenderVisibleElements:le=!1,selectNodesOnDrag:ae=!0,nodesDraggable:ne,nodesConnectable:he,nodesFocusable:Q,nodeOrigin:X=hd,edgesFocusable:ue,edgesUpdatable:ke,elementsSelectable:gt,defaultViewport:Je=gd,minZoom:Qe=.5,maxZoom:Ce=2,translateExtent:et=jn,preventScrolling:Oe=!0,nodeExtent:Ve,defaultMarkerColor:tt="#b1b1b7",zoomOnScroll:nt=!0,zoomOnPinch:mt=!0,panOnScroll:ce=!1,panOnScrollSpeed:we=.5,panOnScrollMode:Fe=Ue.Free,zoomOnDoubleClick:We=!0,panOnDrag:Be=!0,onPaneClick:Me,onPaneMouseEnter:_e,onPaneMouseMove:yt,onPaneMouseLeave:yn,onPaneScroll:xt,onPaneContextMenu:xn,children:ur,onEdgeContextMenu:Ye,onEdgeDoubleClick:Oi,onEdgeMouseEnter:Vi,onEdgeMouseMove:Fi,onEdgeMouseLeave:Wi,onEdgeUpdate:Bi,onEdgeUpdateStart:Yi,onEdgeUpdateEnd:Xi,onReconnect:ji,onReconnectStart:Ui,onReconnectEnd:Gi,reconnectRadius:Zi=10,edgeUpdaterRadius:qi=10,onNodesChange:Ki,onEdgesChange:Ji,noDragClassName:Qi="nodrag",noWheelClassName:es="nowheel",noPanClassName:fr="nopan",fitView:ts=!1,fitViewOptions:ns,connectOnClick:rs=!0,attributionPosition:os,proOptions:is,defaultEdgeOptions:ss,elevateNodesOnSelect:as=!0,elevateEdgesOnSelect:cs=!1,disableKeyboardA11y:dr=!1,autoPanOnConnect:ls=!0,autoPanOnNodeDrag:us=!0,connectionRadius:fs=20,isValidConnection:ds,onError:hs,style:ps,id:hr,nodeDragThreshold:gs,...ms},ys)=>{const wn=hr||"1";return k.createElement("div",{...ms,style:{...ps,...md},ref:ys,className:se(["react-flow",o]),"data-testid":"rf__wrapper",id:hr},k.createElement(Ci,null,k.createElement(ld,{onInit:u,onMove:l,onMoveStart:f,onMoveEnd:p,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:N,onNodeDoubleClick:$,nodeTypes:i,edgeTypes:s,connectionLineType:M,connectionLineStyle:R,connectionLineComponent:H,connectionLineContainerStyle:B,selectionKeyCode:j,selectionOnDrag:U,selectionMode:Z,deleteKeyCode:W,multiSelectionKeyCode:K,panActivationKeyCode:J,zoomActivationKeyCode:q,onlyRenderVisibleElements:le,selectNodesOnDrag:ae,defaultViewport:Je,translateExtent:et,minZoom:Qe,maxZoom:Ce,preventScrolling:Oe,zoomOnScroll:nt,zoomOnPinch:mt,zoomOnDoubleClick:We,panOnScroll:ce,panOnScrollSpeed:we,panOnScrollMode:Fe,panOnDrag:Be,onPaneClick:Me,onPaneMouseEnter:_e,onPaneMouseMove:yt,onPaneMouseLeave:yn,onPaneScroll:xt,onPaneContextMenu:xn,onSelectionContextMenu:w,onSelectionStart:T,onSelectionEnd:I,onEdgeContextMenu:Ye,onEdgeDoubleClick:Oi,onEdgeMouseEnter:Vi,onEdgeMouseMove:Fi,onEdgeMouseLeave:Wi,onReconnect:ji??Bi,onReconnectStart:Ui??Yi,onReconnectEnd:Gi??Xi,reconnectRadius:Zi??qi,defaultMarkerColor:tt,noDragClassName:Qi,noWheelClassName:es,noPanClassName:fr,elevateEdgesOnSelect:cs,rfId:wn,disableKeyboardA11y:dr,nodeOrigin:X,nodeExtent:Ve}),k.createElement(sf,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:y,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:ne,nodesConnectable:he,nodesFocusable:Q,edgesFocusable:ue,edgesUpdatable:ke,elementsSelectable:gt,elevateNodesOnSelect:as,minZoom:Qe,maxZoom:Ce,nodeExtent:Ve,onNodesChange:Ki,onEdgesChange:Ji,snapToGrid:ie,snapGrid:re,connectionMode:S,translateExtent:et,connectOnClick:rs,defaultEdgeOptions:ss,fitView:ts,fitViewOptions:ns,onNodesDelete:O,onEdgesDelete:P,onNodeDragStart:D,onNodeDrag:V,onNodeDragStop:A,onSelectionDrag:d,onSelectionDragStart:L,onSelectionDragStop:E,noPanClassName:fr,nodeOrigin:X,rfId:wn,autoPanOnConnect:ls,autoPanOnNodeDrag:us,onError:hs,connectionRadius:fs,isValidConnection:ds,nodeDragThreshold:gs}),k.createElement(rf,{onSelectionChange:F}),ur,k.createElement(zu,{proOptions:is,position:os}),k.createElement(ff,{rfId:wn,disableKeyboardA11y:dr})))});Mi.displayName="ReactFlow";function $i(e){return t=>{const[n,r]=b.useState(t),o=b.useCallback(i=>r(s=>e(i,s)),[]);return[n,r,o]}}const yd=$i(gi),xd=$i(Nf);function Ti(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Ai=({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:c,className:u,borderRadius:l,shapeRendering:f,onClick:p,selected:h})=>{const{background:y,backgroundColor:g}=i||{},v=s||y||g;return k.createElement("rect",{className:se(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:l,ry:l,width:r,height:o,fill:v,stroke:a,strokeWidth:c,shapeRendering:f,onClick:p?m=>p(m,e):void 0})};Ai.displayName="MiniMapNode";var wd=b.memo(Ai);const vd=e=>e.nodeOrigin,bd=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Tn=e=>e instanceof Function?e:()=>e;function Sd({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=wd,onClick:s}){const a=ee(bd,Ti),c=ee(vd),u=Tn(t),l=Tn(e),f=Tn(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return k.createElement(k.Fragment,null,a.map(h=>{const{x:y,y:g}=Ze(h,c).positionAbsolute;return k.createElement(i,{key:h.id,x:y,y:g,width:h.width,height:h.height,style:h.style,selected:h.selected,className:f(h),color:u(h),borderRadius:r,strokeColor:l(h),strokeWidth:o,shapeRendering:p,onClick:s,id:h.id})}))}var _d=b.memo(Sd);const Ed=200,Nd=150,kd=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Du(gn(t,e.nodeOrigin),n):n,rfId:e.rfId}},Cd="react-flow__minimap-desc";function zi({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:l=1,position:f="bottom-right",onClick:p,onNodeClick:h,pannable:y=!1,zoomable:g=!1,ariaLabel:v="React Flow mini map",inversePan:m=!1,zoomStep:_=10,offsetScale:C=5}){const x=oe(),N=b.useRef(null),{boundingRect:$,viewBB:D,rfId:V}=ee(kd,Ti),A=(e==null?void 0:e.width)??Ed,O=(e==null?void 0:e.height)??Nd,P=$.width/A,F=$.height/O,L=Math.max(P,F),d=L*A,E=L*O,w=C*L,T=$.x-(d-$.width)/2-w,I=$.y-(E-$.height)/2-w,S=d+w*2,M=E+w*2,R=`${Cd}-${V}`,H=b.useRef(0);H.current=L,b.useEffect(()=>{if(N.current){const j=ge(N.current),U=K=>{const{transform:q,d3Selection:ie,d3Zoom:re}=x.getState();if(K.sourceEvent.type!=="wheel"||!ie||!re)return;const le=-K.sourceEvent.deltaY*(K.sourceEvent.deltaMode===1?.05:K.sourceEvent.deltaMode?1:.002)*_,ae=q[2]*Math.pow(2,le);re.scaleTo(ie,ae)},Z=K=>{const{transform:q,d3Selection:ie,d3Zoom:re,translateExtent:le,width:ae,height:ne}=x.getState();if(K.sourceEvent.type!=="mousemove"||!ie||!re)return;const he=H.current*Math.max(1,q[2])*(m?-1:1),Q={x:q[0]-K.sourceEvent.movementX*he,y:q[1]-K.sourceEvent.movementY*he},X=[[0,0],[ae,ne]],ue=Ae.translate(Q.x,Q.y).scale(q[2]),ke=re.constrain()(ue,X,le);re.transform(ie,ke)},J=Ho().on("zoom",y?Z:null).on("zoom.wheel",g?U:null);return j.call(J),()=>{j.on("zoom",null)}}},[y,g,m,_]);const B=p?j=>{const U=ve(j);p(j,{x:U[0],y:U[1]})}:void 0,W=h?(j,U)=>{const Z=x.getState().nodeInternals.get(U);h(j,Z)}:void 0;return k.createElement(Qn,{position:f,style:e,className:se(["react-flow__minimap",t]),"data-testid":"rf__minimap"},k.createElement("svg",{width:A,height:O,viewBox:`${T} ${I} ${S} ${M}`,role:"img","aria-labelledby":R,ref:N,onClick:B},v&&k.createElement("title",{id:R},v),k.createElement(_d,{onClick:W,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),k.createElement("path",{className:"react-flow__minimap-mask",d:`M${T-w},${I-w}h${S+w*2}v${M+w*2}h${-S-w*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:l,pointerEvents:"none"})))}zi.displayName="MiniMap";var Md=b.memo(zi);function $d(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}function Td(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ad(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},k.createElement("path",{d:"M0 0h32v4.2H0z"}))}function zd(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},k.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Id(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Rd(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const kt=({children:e,className:t,...n})=>k.createElement("button",{type:"button",className:se(["react-flow__controls-button",t]),...n},e);kt.displayName="ControlButton";const Dd=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ii=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:l,position:f="bottom-left"})=>{const p=oe(),[h,y]=b.useState(!1),{isInteractive:g,minZoomReached:v,maxZoomReached:m}=ee(Dd,$d),{zoomIn:_,zoomOut:C,fitView:x}=mn();if(b.useEffect(()=>{y(!0)},[]),!h)return null;const N=()=>{_(),i==null||i()},$=()=>{C(),s==null||s()},D=()=>{x(o),a==null||a()},V=()=>{p.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)};return k.createElement(Qn,{className:se(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&k.createElement(k.Fragment,null,k.createElement(kt,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},k.createElement(Td,null)),k.createElement(kt,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},k.createElement(Ad,null))),n&&k.createElement(kt,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},k.createElement(zd,null)),r&&k.createElement(kt,{className:"react-flow__controls-interactive",onClick:V,title:"toggle interactivity","aria-label":"toggle interactivity"},g?k.createElement(Rd,null):k.createElement(Id,null)),l)};Ii.displayName="Controls";var Hd=b.memo(Ii);function Pd(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var xe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xe||(xe={}));function Ld({color:e,dimensions:t,lineWidth:n}){return k.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Od({color:e,radius:t}){return k.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Vd={[xe.Dots]:"#91919a",[xe.Lines]:"#eee",[xe.Cross]:"#e2e2e2"},Fd={[xe.Dots]:1,[xe.Lines]:1,[xe.Cross]:6},Wd=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ri({id:e,variant:t=xe.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:a,className:c}){const u=b.useRef(null),{transform:l,patternId:f}=ee(Wd,Pd),p=s||Vd[t],h=r||Fd[t],y=t===xe.Dots,g=t===xe.Cross,v=Array.isArray(n)?n:[n,n],m=[v[0]*l[2]||1,v[1]*l[2]||1],_=h*l[2],C=g?[_,_]:m,x=y?[_/i,_/i]:[C[0]/i,C[1]/i];return k.createElement("svg",{className:se(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},k.createElement("pattern",{id:f+e,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},y?k.createElement(Od,{color:p,radius:_/i}):k.createElement(Ld,{dimensions:C,color:p,lineWidth:o})),k.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Ri.displayName="Background";var Bd=b.memo(Ri);const Di=b.memo(({data:e,selected:t})=>z.jsxs("div",{style:{padding:"12px 16px",borderRadius:"12px",background:"linear-gradient(135deg, #1a1a2e 0%, #16162a 100%)",border:t?"2px solid #f59e0b":"1px solid #2a2a3e",minWidth:"180px",boxShadow:t?"0 0 20px rgba(245, 158, 11, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[z.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #f59e0b, #d97706)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:""}),z.jsxs("div",{children:[z.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff"},children:e.label}),z.jsx("div",{style:{fontSize:"10px",color:"#f59e0b",fontWeight:500},children:"TRIGGER"})]})]}),e.description&&z.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"4px"},children:e.description}),z.jsx(ye,{type:"source",position:Y.Bottom,style:{background:"#f59e0b",width:"12px",height:"12px",border:"2px solid #0a0a0f"}})]}));Di.displayName="TriggerNode";const Hi=b.memo(({data:e,selected:t})=>z.jsxs("div",{style:{padding:"12px 16px",borderRadius:"12px",background:"linear-gradient(135deg, #1a1a2e 0%, #16162a 100%)",border:t?"2px solid #8b5cf6":"1px solid #2a2a3e",minWidth:"180px",boxShadow:t?"0 0 20px rgba(139, 92, 246, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[z.jsx(ye,{type:"target",position:Y.Top,style:{background:"#8b5cf6",width:"12px",height:"12px",border:"2px solid #0a0a0f"}}),z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[z.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:""}),z.jsxs("div",{children:[z.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff"},children:e.label}),z.jsx("div",{style:{fontSize:"10px",color:"#8b5cf6",fontWeight:500},children:"CONDITION"})]})]}),e.description&&z.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"4px"},children:e.description}),z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px",fontSize:"10px",color:"#64748b"},children:[z.jsx("span",{style:{color:"#ef4444"},children:"No"}),z.jsx("span",{style:{color:"#22c55e"},children:"Yes"})]}),z.jsx(ye,{type:"source",position:Y.Bottom,id:"false",style:{background:"#ef4444",width:"10px",height:"10px",border:"2px solid #0a0a0f",left:"25%"}}),z.jsx(ye,{type:"source",position:Y.Bottom,id:"true",style:{background:"#22c55e",width:"10px",height:"10px",border:"2px solid #0a0a0f",left:"75%"}})]}));Hi.displayName="ConditionNode";const Pi=b.memo(({data:e,selected:t})=>{const n=r=>({mail:"",user:"",play:"",send:"",database:"",api:"",notification:""})[r||""]||"";return z.jsxs("div",{style:{padding:"12px 16px",borderRadius:"12px",background:"linear-gradient(135deg, #1a1a2e 0%, #16162a 100%)",border:t?"2px solid #6366f1":"1px solid #2a2a3e",minWidth:"180px",boxShadow:t?"0 0 20px rgba(99, 102, 241, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[z.jsx(ye,{type:"target",position:Y.Top,style:{background:"#6366f1",width:"12px",height:"12px",border:"2px solid #0a0a0f"}}),z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[z.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #6366f1, #4f46e5)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:n(e.icon)}),z.jsxs("div",{children:[z.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff"},children:e.label}),z.jsx("div",{style:{fontSize:"10px",color:"#6366f1",fontWeight:500},children:"ACTION"})]})]}),e.description&&z.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"4px"},children:e.description}),z.jsx(ye,{type:"source",position:Y.Bottom,style:{background:"#6366f1",width:"12px",height:"12px",border:"2px solid #0a0a0f"}})]})});Pi.displayName="ActionNode";const Li=b.memo(({data:e,selected:t})=>z.jsxs("div",{style:{padding:"12px 16px",borderRadius:"12px",background:"linear-gradient(135deg, #1a1a2e 0%, #16162a 100%)",border:t?"2px solid #64748b":"1px solid #2a2a3e",minWidth:"160px",boxShadow:t?"0 0 20px rgba(100, 116, 139, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[z.jsx(ye,{type:"target",position:Y.Top,style:{background:"#64748b",width:"12px",height:"12px",border:"2px solid #0a0a0f"}}),z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[z.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #64748b, #475569)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:""}),z.jsxs("div",{children:[z.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff"},children:e.label}),z.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:500},children:"DELAY"})]})]}),e.description&&z.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"4px"},children:e.description}),e.duration&&z.jsx("div",{style:{fontSize:"12px",color:"#f59e0b",marginTop:"8px",fontWeight:500},children:e.duration}),z.jsx(ye,{type:"source",position:Y.Bottom,style:{background:"#64748b",width:"12px",height:"12px",border:"2px solid #0a0a0f"}})]}));Li.displayName="DelayNode";const Yd={trigger:Di,condition:Hi,action:Pi,delay:Li};function Xd({nodes:e,edges:t,onNodesChange:n,onEdgesChange:r}){const o=b.useRef(null),{screenToFlowPosition:i}=mn(),[s,a,c]=yd(e),[u,l,f]=xd(t);b.useEffect(()=>{n(s)},[s,n]),b.useEffect(()=>{r(u)},[u,r]);const p=b.useCallback(g=>{l(v=>Go({...g,animated:!0,style:{stroke:"#6366f1",strokeWidth:2}},v))},[l]),h=b.useCallback(g=>{g.preventDefault(),g.dataTransfer.dropEffect="move"},[]),y=b.useCallback(g=>{g.preventDefault();const v=g.dataTransfer.getData("application/lux-node-type"),m=g.dataTransfer.getData("application/lux-node-data");if(!v)return;const _=i({x:g.clientX,y:g.clientY});let C={label:"New Node",description:"Configure this node",icon:"circle"};try{m&&(C=JSON.parse(m))}catch(N){console.error("Failed to parse node data:",N)}const x={id:`${v}-${Date.now()}`,type:v,position:_,data:C};a(N=>[...N,x])},[i,a]);return z.jsx("div",{ref:o,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0f"},onDragOver:h,onDrop:y,children:z.jsxs(Mi,{nodes:s,edges:u,onNodesChange:c,onEdgesChange:f,onConnect:p,nodeTypes:Yd,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1},defaultEdgeOptions:{animated:!0,style:{stroke:"#6366f1",strokeWidth:2}},connectionLineStyle:{stroke:"#6366f1",strokeWidth:2},style:{backgroundColor:"#0a0a0f"},proOptions:{hideAttribution:!0},children:[z.jsx(Bd,{variant:xe.Dots,gap:20,size:1,color:"#1e1e2e"}),z.jsx(Hd,{style:{backgroundColor:"#1e1e2e",borderColor:"#2a2a3e"}}),z.jsx(Md,{style:{backgroundColor:"#0f0f1a",border:"1px solid #2a2a3e"},nodeColor:g=>{switch(g.type){case"trigger":return"#f59e0b";case"condition":return"#8b5cf6";case"action":return"#6366f1";case"delay":return"#64748b";default:return"#6366f1"}},maskColor:"rgba(0, 0, 0, 0.8)"})]})})}function jd({onAddNode:e,...t}){return z.jsx(lr,{children:z.jsx(Xd,{...t})})}const Ud=[{title:"Triggers",nodes:[{type:"trigger",label:"New Lead",description:"When a new lead arrives",icon:"zap",emoji:"",color:"#f59e0b"},{type:"trigger",label:"Form Submitted",description:"When a form is submitted",icon:"file-text",emoji:"",color:"#f59e0b"},{type:"trigger",label:"Schedule",description:"Run on a schedule",icon:"calendar",emoji:"",color:"#f59e0b"},{type:"trigger",label:"Webhook",description:"HTTP webhook trigger",icon:"link",emoji:"",color:"#f59e0b"}]},{title:"Logic",nodes:[{type:"condition",label:"If/Then",description:"Branch based on condition",icon:"git-branch",emoji:"",color:"#8b5cf6"},{type:"condition",label:"Filter",description:"Filter items by criteria",icon:"filter",emoji:"",color:"#8b5cf6"},{type:"delay",label:"Wait",description:"Pause execution",icon:"clock",emoji:"",color:"#64748b"}]},{title:"Actions",nodes:[{type:"action",label:"Send Email",description:"Send an email message",icon:"mail",emoji:"",color:"#6366f1"},{type:"action",label:"Send SMS",description:"Send text message",icon:"message-square",emoji:"",color:"#6366f1"},{type:"action",label:"Update Record",description:"Update database record",icon:"database",emoji:"",color:"#6366f1"},{type:"action",label:"Create Task",description:"Create a new task",icon:"check-square",emoji:"",color:"#6366f1"},{type:"action",label:"Notify Team",description:"Send team notification",icon:"bell",emoji:"",color:"#6366f1"},{type:"action",label:"Call API",description:"Make HTTP request",icon:"globe",emoji:"",color:"#6366f1"}]}];function Gd(e){const t=(n,r)=>{n.dataTransfer.setData("application/lux-node-type",r.type),n.dataTransfer.setData("application/lux-node-data",JSON.stringify({label:r.label,description:r.description,icon:r.icon})),n.dataTransfer.effectAllowed="move"};return z.jsxs("div",{style:{width:"280px",backgroundColor:"#0f0f1a",borderRight:"1px solid #1e1e2e",overflowY:"auto",padding:"16px"},children:[z.jsx("h2",{style:{fontSize:"12px",fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"16px"},children:"Node Palette"}),z.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"20px"},children:"Drag nodes to the canvas to build your workflow"}),Ud.map(n=>z.jsxs("div",{style:{marginBottom:"24px"},children:[z.jsx("h3",{style:{fontSize:"11px",fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px"},children:n.title}),z.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:n.nodes.map((r,o)=>z.jsxs("div",{draggable:!0,onDragStart:i=>t(i,r),style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 12px",backgroundColor:"#1a1a2e",borderRadius:"8px",border:"1px solid #2a2a3e",cursor:"grab",transition:"all 0.2s ease"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#252540",i.currentTarget.style.borderColor=r.color,i.currentTarget.style.transform="translateX(4px)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#1a1a2e",i.currentTarget.style.borderColor="#2a2a3e",i.currentTarget.style.transform="translateX(0)"},children:[z.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"6px",backgroundColor:`${r.color}20`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",flexShrink:0},children:r.emoji}),z.jsxs("div",{style:{overflow:"hidden"},children:[z.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.label}),z.jsx("div",{style:{fontSize:"11px",color:"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.description})]})]},`${r.type}-${o}`))})]},n.title))]})}function Zd(){const[e,t]=b.useState(""),[n,r]=b.useState(!1),[o,i]=b.useState(!1),s=()=>{e.trim()&&(r(!0),setTimeout(()=>{r(!1),i(!0),setTimeout(()=>{i(!1)},4e3)},1e3))},a=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),s())},c=["When a new lead comes in, check if their score is above 80. If yes, send a welcome email and assign to sales. If no, add to nurture campaign.","Every Monday at 9am, generate a report of last week's sales and email it to the team.","When a support ticket is created, notify the support channel and create a task for the on-call engineer."];return z.jsxs(z.Fragment,{children:[z.jsxs("div",{style:{padding:"16px 24px",backgroundColor:"#0f0f1a",borderBottom:"1px solid #1e1e2e"},children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",maxWidth:"1200px",margin:"0 auto"},children:[z.jsxs("div",{style:{flex:1,position:"relative"},children:[z.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",fontSize:"20px"},children:""}),z.jsx("input",{type:"text",value:e,onChange:u=>t(u.target.value),onKeyDown:a,placeholder:"Describe your workflow in natural language... e.g., 'When a new lead arrives, send a welcome email'",style:{width:"100%",padding:"14px 16px 14px 48px",fontSize:"14px",backgroundColor:"#1a1a2e",border:"1px solid #2a2a3e",borderRadius:"12px",color:"#fff",outline:"none",transition:"border-color 0.2s ease"},onFocus:u=>{u.target.style.borderColor="#6366f1"},onBlur:u=>{u.target.style.borderColor="#2a2a3e"}})]}),z.jsx("button",{onClick:s,disabled:n||!e.trim(),style:{padding:"14px 24px",borderRadius:"12px",border:"none",background:n?"#4b5563":"linear-gradient(135deg, #6366f1, #8b5cf6)",color:"#fff",cursor:n||!e.trim()?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",opacity:e.trim()?1:.5,transition:"all 0.2s ease"},children:n?z.jsxs(z.Fragment,{children:[z.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid #fff",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Generating..."]}):z.jsxs(z.Fragment,{children:[z.jsx("span",{children:""}),"Generate Workflow"]})})]}),z.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",flexWrap:"wrap",maxWidth:"1200px",margin:"12px auto 0"},children:[z.jsx("span",{style:{fontSize:"12px",color:"#64748b"},children:"Try:"}),c.map((u,l)=>z.jsxs("button",{onClick:()=>t(u),style:{padding:"4px 12px",fontSize:"12px",backgroundColor:"#1a1a2e",border:"1px solid #2a2a3e",borderRadius:"20px",color:"#94a3b8",cursor:"pointer",transition:"all 0.2s ease",maxWidth:"300px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:f=>{f.currentTarget.style.borderColor="#6366f1",f.currentTarget.style.color="#fff"},onMouseLeave:f=>{f.currentTarget.style.borderColor="#2a2a3e",f.currentTarget.style.color="#94a3b8"},children:[u.slice(0,60),"..."]},l))]})]}),o&&z.jsxs("div",{style:{position:"fixed",bottom:"24px",right:"24px",padding:"16px 24px",backgroundColor:"#1a1a2e",border:"1px solid #6366f1",borderRadius:"12px",boxShadow:"0 4px 20px rgba(99, 102, 241, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",gap:"12px",animation:"slideIn 0.3s ease"},children:[z.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #6366f1, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:""}),z.jsxs("div",{children:[z.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:"AI Workflow Generation Coming Soon!"}),z.jsx("div",{style:{fontSize:"12px",color:"#94a3b8"},children:"We're working on AI-powered workflow creation. Stay tuned!"})]}),z.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"18px",padding:"4px",marginLeft:"8px"},children:""})]}),z.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})}const qd=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"New Lead Received",description:"Triggers when a new lead is added",icon:"zap"}},{id:"condition-1",type:"condition",position:{x:250,y:180},data:{label:"Check Lead Score",description:"If lead score > 80",icon:"git-branch"}},{id:"action-1",type:"action",position:{x:100,y:320},data:{label:"Send Welcome Email",description:"Personalized welcome message",icon:"mail"}},{id:"action-2",type:"action",position:{x:400,y:320},data:{label:"Assign to Sales Rep",description:"Route to available rep",icon:"user"}}],Kd=[{id:"e-trigger-condition",source:"trigger-1",target:"condition-1",animated:!0,style:{stroke:"#6366f1"}},{id:"e-condition-action1",source:"condition-1",target:"action-1",sourceHandle:"false",label:"No",style:{stroke:"#ef4444"}},{id:"e-condition-action2",source:"condition-1",target:"action-2",sourceHandle:"true",label:"Yes",style:{stroke:"#22c55e"}}];function rh(){const{nodes:e,edges:t,workflowName:n,isDirty:r,isSaving:o,setNodes:i,setEdges:s,setWorkflowName:a,undo:c,redo:u,canUndo:l,canRedo:f,markClean:p,setSaving:h,addNode:y}=ws(),g=vs();b.useEffect(()=>{e.length===0&&(i(qd),s(Kd),p())},[]),b.useEffect(()=>{const N=$=>{if($.metaKey||$.ctrlKey)switch($.key.toLowerCase()){case"z":$.preventDefault(),$.shiftKey?f()&&u():l()&&c();break;case"s":$.preventDefault(),x();break}};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[l,f,c,u]),b.useEffect(()=>{if(!r)return;const N=setInterval(()=>{C()},3e4);return()=>clearInterval(N)},[r]);const v=b.useCallback(N=>{i(N)},[i]),m=b.useCallback(N=>{s(N)},[s]),_=b.useCallback((N,$)=>{const D={id:`${N}-${Date.now()}`,type:N,position:$,data:{label:Jd(N),description:Qd(N),icon:eh(N)}};y(D)},[y]),C=b.useCallback(()=>{const N={name:n,nodes:e,edges:t,savedAt:new Date().toISOString()};localStorage.setItem("lux-workflow-autosave",JSON.stringify(N)),console.log("Auto-saved workflow")},[n,e,t]),x=b.useCallback(()=>{h(!0);const N={name:n,nodes:e,edges:t,savedAt:new Date().toISOString()};setTimeout(()=>{localStorage.setItem(`lux-workflow-${Date.now()}`,JSON.stringify(N)),p(),h(!1),g.success("Workflow saved","Your workflow has been saved successfully.")},500)},[n,e,t,p,h,g]);return z.jsxs("div",{className:"lux-builder-page",style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"#0a0a0f",color:"#fff"},children:[z.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 24px",borderBottom:"1px solid #1e1e2e",backgroundColor:"#0f0f1a"},children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[z.jsx("h1",{style:{fontSize:"20px",fontWeight:600,background:"linear-gradient(135deg, #6366f1, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"LUX Builder"}),z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[z.jsx("input",{type:"text",value:n,onChange:N=>a(N.target.value),style:{background:"transparent",border:"1px solid #2a2a3e",borderRadius:"6px",padding:"6px 12px",color:"#fff",fontSize:"14px"},"aria-label":"Workflow name"}),r&&z.jsx("span",{title:"Unsaved changes",style:{display:"flex",alignItems:"center"},children:z.jsx(Ss,{className:"w-2 h-2 fill-amber-500 text-amber-500","aria-label":"Unsaved changes"})})]})]}),z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[z.jsx("button",{onClick:c,disabled:!l(),style:{padding:"8px",borderRadius:"6px",border:"1px solid #2a2a3e",background:"transparent",color:l()?"#fff":"#4b5563",cursor:l()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center"},title:"Undo (Cmd+Z)","aria-label":"Undo",children:z.jsx(ks,{className:"w-4 h-4"})}),z.jsx("button",{onClick:u,disabled:!f(),style:{padding:"8px",borderRadius:"6px",border:"1px solid #2a2a3e",background:"transparent",color:f()?"#fff":"#4b5563",cursor:f()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center"},title:"Redo (Cmd+Shift+Z)","aria-label":"Redo",children:z.jsx(Es,{className:"w-4 h-4"})}),z.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"#2a2a3e",margin:"0 4px"}}),z.jsxs("button",{onClick:x,disabled:o,style:{padding:"8px 16px",borderRadius:"6px",border:"none",background:r?"linear-gradient(135deg, #6366f1, #8b5cf6)":"#2a2a3e",color:"#fff",cursor:o?"wait":"pointer",fontWeight:500,display:"flex",alignItems:"center",gap:"6px",opacity:o?.7:1},title:"Save (Cmd+S)",children:[z.jsx(Ns,{className:"w-4 h-4"}),o?"Saving...":"Save"]}),z.jsxs(bs,{to:"/studio/automations",style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #2a2a3e",background:"transparent",color:"#fff",textDecoration:"none",fontWeight:500,display:"flex",alignItems:"center",gap:"6px"},children:[z.jsx(_s,{className:"w-4 h-4"}),"Automations"]})]})]}),z.jsx(Zd,{}),z.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[z.jsx(Gd,{onAddNode:_}),z.jsx("div",{style:{flex:1,position:"relative"},children:z.jsx(jd,{nodes:e,edges:t,onNodesChange:v,onEdgesChange:m,onAddNode:_})})]})]})}function Jd(e){return{trigger:"New Trigger",condition:"New Condition",action:"New Action",delay:"Wait",loop:"Loop",webhook:"Webhook"}[e]||"New Node"}function Qd(e){return{trigger:"Configure trigger event",condition:"Set condition logic",action:"Define action to perform",delay:"Add time delay",loop:"Iterate over items",webhook:"HTTP webhook endpoint"}[e]||"Configure this node"}function eh(e){return{trigger:"zap",condition:"git-branch",action:"play",delay:"clock",loop:"repeat",webhook:"link"}[e]||"circle"}export{rh as default};
